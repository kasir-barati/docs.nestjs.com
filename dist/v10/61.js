"use strict";(self.webpackChunkdocs_nestjs_com=self.webpackChunkdocs_nestjs_com||[]).push([[61],{7061:(S,c,a)=>{a.r(c),a.d(c,{OpenApiModule:()=>P});var d=a(177),F=a(685),l=a(445),r=a(8050),e=a(4438),i=a(4819),p=a(2469);let u=(()=>{class t extends r.y{static \u0275fac=(()=>{let o;return function(s){return(o||(o=e.xGo(t)))(s||t)}})();static \u0275cmp=e.VBU({type:t,selectors:[["app-cli-plugin"]],features:[e.Vt3],decls:450,vars:0,consts:[["contentReference",""],[1,"content"],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/cli-plugin.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","cli-plugin"],["rel","nofollow","target","_blank","href","https://www.typescriptlang.org/docs/handbook/decorators.html"],[1,"info"],["appAnchor","","id","overview"],[1,"language-typescript"],["href","/openapi/cli-plugin#using-the-cli-plugin"],["rel","nofollow","target","_blank","href","https://docs.nestjs.com/openapi/mapped-types"],["appAnchor","","id","comments-introspection"],[1,"language-ts"],["appAnchor","","id","using-the-cli-plugin"],["routerLink","/cli/overview"],[1,"language-javascript"],["appAnchor","","id","swc-builder"],["href","/recipes/swc#type-checking"],[1,"language-bash"],["href","/recipes/swc#monorepo-and-cli-plugins"],["appAnchor","","id","integration-with-ts-jest-e2e-tests"],[1,"language-json"],["appAnchor","","id","troubleshooting-jest-e2e-tests"]],template:function(n,s){1&n&&(e.j41(0,"div",1,0)(2,"div",2)(3,"a",3),e.nrm(4,"i",4),e.k0s()(),e.j41(5,"h3",5),e.EFF(6,"CLI Plugin"),e.k0s(),e.j41(7,"p")(8,"a",6),e.EFF(9,"TypeScript"),e.k0s(),e.EFF(10,"'s metadata reflection system has several limitations which make it impossible to, for instance, determine what properties a class consists of or recognize whether a given property is optional or required. However, some of these constraints can be addressed at compilation time. Nest provides a plugin that enhances the TypeScript compilation process to reduce the amount of boilerplate code required."),e.k0s(),e.j41(11,"blockquote",7)(12,"strong"),e.EFF(13,"Hint"),e.k0s(),e.EFF(14," This plugin is "),e.j41(15,"strong"),e.EFF(16,"opt-in"),e.k0s(),e.EFF(17,". If you prefer, you can declare all decorators manually, or only specific decorators where you need them.\n"),e.k0s(),e.j41(18,"h4",8)(19,"span"),e.EFF(20,"Overview"),e.k0s()(),e.j41(21,"p"),e.EFF(22,"The Swagger plugin will automatically:"),e.k0s(),e.j41(23,"ul")(24,"li"),e.EFF(25,"annotate all DTO properties with "),e.j41(26,"code"),e.EFF(27,"@ApiProperty"),e.k0s(),e.EFF(28," unless "),e.j41(29,"code"),e.EFF(30,"@ApiHideProperty"),e.k0s(),e.EFF(31," is used"),e.k0s(),e.j41(32,"li"),e.EFF(33,"set the "),e.j41(34,"code"),e.EFF(35,"required"),e.k0s(),e.EFF(36," property depending on the question mark (e.g. "),e.j41(37,"code"),e.EFF(38,"name?: string"),e.k0s(),e.EFF(39," will set "),e.j41(40,"code"),e.EFF(41,"required: false"),e.k0s(),e.EFF(42,")"),e.k0s(),e.j41(43,"li"),e.EFF(44,"set the "),e.j41(45,"code"),e.EFF(46,"type"),e.k0s(),e.EFF(47," or "),e.j41(48,"code"),e.EFF(49,"enum"),e.k0s(),e.EFF(50," property depending on the type (supports arrays as well)"),e.k0s(),e.j41(51,"li"),e.EFF(52,"set the "),e.j41(53,"code"),e.EFF(54,"default"),e.k0s(),e.EFF(55," property based on the assigned default value"),e.k0s(),e.j41(56,"li"),e.EFF(57,"set several validation rules based on "),e.j41(58,"code"),e.EFF(59,"class-validator"),e.k0s(),e.EFF(60," decorators (if "),e.j41(61,"code"),e.EFF(62,"classValidatorShim"),e.k0s(),e.EFF(63," set to "),e.j41(64,"code"),e.EFF(65,"true"),e.k0s(),e.EFF(66,")"),e.k0s(),e.j41(67,"li"),e.EFF(68,"add a response decorator to every endpoint with a proper status and "),e.j41(69,"code"),e.EFF(70,"type"),e.k0s(),e.EFF(71," (response model)"),e.k0s(),e.j41(72,"li"),e.EFF(73,"generate descriptions for properties and endpoints based on comments (if "),e.j41(74,"code"),e.EFF(75,"introspectComments"),e.k0s(),e.EFF(76," set to "),e.j41(77,"code"),e.EFF(78,"true"),e.k0s(),e.EFF(79,")"),e.k0s(),e.j41(80,"li"),e.EFF(81,"generate example values for properties based on comments (if "),e.j41(82,"code"),e.EFF(83,"introspectComments"),e.k0s(),e.EFF(84," set to "),e.j41(85,"code"),e.EFF(86,"true"),e.k0s(),e.EFF(87,")"),e.k0s()(),e.j41(88,"p"),e.EFF(89,"Please, note that your filenames "),e.j41(90,"strong"),e.EFF(91,"must have"),e.k0s(),e.EFF(92," one of the following suffixes: "),e.j41(93,"code"),e.EFF(94,"['.dto.ts', '.entity.ts']"),e.k0s(),e.EFF(95," (e.g., "),e.j41(96,"code"),e.EFF(97,"create-user.dto.ts"),e.k0s(),e.EFF(98,") in order to be analysed by the plugin."),e.k0s(),e.j41(99,"p"),e.EFF(100,"If you are using a different suffix, you can adjust the plugin's behavior by specifying the "),e.j41(101,"code"),e.EFF(102,"dtoFileNameSuffix"),e.k0s(),e.EFF(103," option (see below)."),e.k0s(),e.j41(104,"p"),e.EFF(105,"Previously, if you wanted to provide an interactive experience with the Swagger UI,\nyou had to duplicate a lot of code to let the package know how your models/components should be declared in the specification. For example, you could define a simple "),e.j41(106,"code"),e.EFF(107,"CreateUserDto"),e.k0s(),e.EFF(108," class as follows:"),e.k0s(),e.j41(109,"app-copy-button")(110,"pre")(111,"code",9),e.EFF(112,"\nexport class CreateUserDto {\n  @ApiProperty()\n  email: string;\n\n  @ApiProperty()\n  password: string;\n\n  @ApiProperty({ enum: RoleEnum, default: [], isArray: true })\n  roles: RoleEnum[] = [];\n\n  @ApiProperty({ required: false, default: true })\n  isEnabled?: boolean = true;\n}\n"),e.k0s()()(),e.j41(113,"p"),e.EFF(114,"While not a significant issue with medium-sized projects, it becomes verbose & hard to maintain once you have a large set of classes."),e.k0s(),e.j41(115,"p"),e.EFF(116,"By "),e.j41(117,"a",10),e.EFF(118,"enabling the Swagger plugin"),e.k0s(),e.EFF(119,", the above class definition can be declared simply:"),e.k0s(),e.j41(120,"app-copy-button")(121,"pre")(122,"code",9),e.EFF(123,"\nexport class CreateUserDto {\n  email: string;\n  password: string;\n  roles: RoleEnum[] = [];\n  isEnabled?: boolean = true;\n}\n"),e.k0s()()(),e.j41(124,"blockquote",7)(125,"strong"),e.EFF(126,"Note"),e.k0s(),e.EFF(127," The Swagger plugin will derive the @ApiProperty() annotations from the TypeScript types and class-validator decorators. This helps in clearly describing your API for the generated Swagger UI documentation. However, the validation at runtime would still be handled by class-validator decorators. So, it is required to continue using validators like "),e.j41(128,"code"),e.EFF(129,"IsEmail()"),e.k0s(),e.EFF(130,", "),e.j41(131,"code"),e.EFF(132,"IsNumber()"),e.k0s(),e.EFF(133,", etc.\n"),e.k0s(),e.j41(134,"p"),e.EFF(135,"Hence, if you intend to rely on automatic annotations for generating documentations and still wish for runtime validations, then the class-validator decorators are still necessary."),e.k0s(),e.j41(136,"blockquote",7)(137,"strong"),e.EFF(138,"Hint"),e.k0s(),e.EFF(139," When using "),e.j41(140,"a",11),e.EFF(141,"mapped types utilities"),e.k0s(),e.EFF(142," (like "),e.j41(143,"code"),e.EFF(144,"PartialType"),e.k0s(),e.EFF(145,") in DTOs import them from "),e.j41(146,"code"),e.EFF(147,"@nestjs/swagger"),e.k0s(),e.EFF(148," instead of "),e.j41(149,"code"),e.EFF(150,"@nestjs/mapped-types"),e.k0s(),e.EFF(151," for the plugin to pick up the schema.\n"),e.k0s(),e.j41(152,"p"),e.EFF(153,"The plugin adds appropriate decorators on the fly based on the "),e.j41(154,"strong"),e.EFF(155,"Abstract Syntax Tree"),e.k0s(),e.EFF(156,". Thus you won't have to struggle with "),e.j41(157,"code"),e.EFF(158,"@ApiProperty"),e.k0s(),e.EFF(159," decorators scattered throughout the code."),e.k0s(),e.j41(160,"blockquote",7)(161,"strong"),e.EFF(162,"Hint"),e.k0s(),e.EFF(163," The plugin will automatically generate any missing swagger properties, but if you need to override them, you simply set them explicitly via "),e.j41(164,"code"),e.EFF(165,"@ApiProperty()"),e.k0s(),e.EFF(166,".\n"),e.k0s(),e.j41(167,"h4",12)(168,"span"),e.EFF(169,"Comments introspection"),e.k0s()(),e.j41(170,"p"),e.EFF(171,"With the comments introspection feature enabled, CLI plugin will generate descriptions and example values for properties based on comments."),e.k0s(),e.j41(172,"p"),e.EFF(173,"For example, given an example "),e.j41(174,"code"),e.EFF(175,"roles"),e.k0s(),e.EFF(176," property:"),e.k0s(),e.j41(177,"app-copy-button")(178,"pre")(179,"code",9),e.EFF(180,"\n/**\n * A list of user's roles\n * @example ['admin']\n */\n@ApiProperty({\n  description: `A list of user's roles`,\n  example: ['admin'],\n})\nroles: RoleEnum[] = [];\n"),e.k0s()()(),e.j41(181,"p"),e.EFF(182,"You must duplicate both description and example values. With "),e.j41(183,"code"),e.EFF(184,"introspectComments"),e.k0s(),e.EFF(185," enabled, the CLI plugin can extract these comments and automatically provide descriptions (and examples, if defined) for properties. Now, the above property can be declared simply as follows:"),e.k0s(),e.j41(186,"app-copy-button")(187,"pre")(188,"code",9),e.EFF(189,"\n/**\n * A list of user's roles\n * @example ['admin']\n */\nroles: RoleEnum[] = [];\n"),e.k0s()()(),e.j41(190,"p"),e.EFF(191,"There are "),e.j41(192,"code"),e.EFF(193,"dtoKeyOfComment"),e.k0s(),e.EFF(194," and "),e.j41(195,"code"),e.EFF(196,"controllerKeyOfComment"),e.k0s(),e.EFF(197," plugin options available for customizing how the plugin assigns values to the "),e.j41(198,"code"),e.EFF(199,"ApiProperty"),e.k0s(),e.EFF(200," and "),e.j41(201,"code"),e.EFF(202,"ApiOperation"),e.k0s(),e.EFF(203," decorators, respectively. See the example below:"),e.k0s(),e.j41(204,"app-copy-button")(205,"pre")(206,"code",9),e.EFF(207,"\nexport class SomeController {\n  /**\n   * Create some resource\n   */\n  @Post()\n  create() {}\n}\n"),e.k0s()()(),e.j41(208,"p"),e.EFF(209,"This is equivalent to the following instruction:"),e.k0s(),e.j41(210,"app-copy-button")(211,"pre")(212,"code",9),e.EFF(213,'\n@ApiOperation({ summary: "Create some resource" })\n'),e.k0s()()(),e.j41(214,"blockquote",7)(215,"strong"),e.EFF(216,"Hint"),e.k0s(),e.EFF(217," For models, the same logic applies but is used with the "),e.j41(218,"code"),e.EFF(219,"ApiProperty"),e.k0s(),e.EFF(220," decorator instead.\n"),e.k0s(),e.j41(221,"p"),e.EFF(222,"For controllers, you can provide not only a summary but also a description (remarks), tags (such as"),e.j41(223,"code"),e.EFF(224," @deprecated"),e.k0s(),e.EFF(225,"), and response examples, like this:"),e.k0s(),e.j41(226,"app-copy-button")(227,"pre")(228,"code",13),e.EFF(229,"\n/**\n * Create a new cat\n *\n * @remarks This operation allows you to create a new cat.\n *\n * @deprecated\n * @throws {500} Something went wrong.\n * @throws {400} Bad Request.\n */\n@Post()\nasync create(): Promise<Cat> {}\n"),e.k0s()()(),e.j41(230,"h4",14)(231,"span"),e.EFF(232,"Using the CLI plugin"),e.k0s()(),e.j41(233,"p"),e.EFF(234,"To enable the plugin, open "),e.j41(235,"code"),e.EFF(236,"nest-cli.json"),e.k0s(),e.EFF(237," (if you use "),e.j41(238,"a",15),e.EFF(239,"Nest CLI"),e.k0s(),e.EFF(240,") and add the following "),e.j41(241,"code"),e.EFF(242,"plugins"),e.k0s(),e.EFF(243," configuration:"),e.k0s(),e.j41(244,"pre")(245,"code",16),e.EFF(246,'\n{\n  "collection": "@nestjs/schematics",\n  "sourceRoot": "src",\n  "compilerOptions": {\n    "plugins": ["@nestjs/swagger"]\n  }\n}\n'),e.k0s()(),e.j41(247,"p"),e.EFF(248,"You can use the "),e.j41(249,"code"),e.EFF(250,"options"),e.k0s(),e.EFF(251," property to customize the behavior of the plugin."),e.k0s(),e.j41(252,"pre")(253,"code",16),e.EFF(254,'\n"plugins": [\n  {\n    "name": "@nestjs/swagger",\n    "options": {\n      "classValidatorShim": false,\n      "introspectComments": true\n    }\n  }\n]\n'),e.k0s()(),e.j41(255,"p"),e.EFF(256,"The "),e.j41(257,"code"),e.EFF(258,"options"),e.k0s(),e.EFF(259," property has to fulfill the following interface:"),e.k0s(),e.j41(260,"app-copy-button")(261,"pre")(262,"code",9),e.EFF(263,"\nexport interface PluginOptions {\n  dtoFileNameSuffix?: string[];\n  controllerFileNameSuffix?: string[];\n  classValidatorShim?: boolean;\n  dtoKeyOfComment?: string;\n  controllerKeyOfComment?: string;\n  introspectComments?: boolean;\n}\n"),e.k0s()()(),e.j41(264,"table")(265,"tr")(266,"th"),e.EFF(267,"Option"),e.k0s(),e.j41(268,"th"),e.EFF(269,"Default"),e.k0s(),e.j41(270,"th"),e.EFF(271,"Description"),e.k0s()(),e.j41(272,"tr")(273,"td")(274,"code"),e.EFF(275,"dtoFileNameSuffix"),e.k0s()(),e.j41(276,"td")(277,"code"),e.EFF(278,"['.dto.ts', '.entity.ts']"),e.k0s()(),e.j41(279,"td"),e.EFF(280,"DTO (Data Transfer Object) files suffix"),e.k0s()(),e.j41(281,"tr")(282,"td")(283,"code"),e.EFF(284,"controllerFileNameSuffix"),e.k0s()(),e.j41(285,"td")(286,"code"),e.EFF(287,".controller.ts"),e.k0s()(),e.j41(288,"td"),e.EFF(289,"Controller files suffix"),e.k0s()(),e.j41(290,"tr")(291,"td")(292,"code"),e.EFF(293,"classValidatorShim"),e.k0s()(),e.j41(294,"td")(295,"code"),e.EFF(296,"true"),e.k0s()(),e.j41(297,"td"),e.EFF(298,"If set to true, the module will reuse "),e.j41(299,"code"),e.EFF(300,"class-validator"),e.k0s(),e.EFF(301," validation decorators (e.g. "),e.j41(302,"code"),e.EFF(303,"@Max(10)"),e.k0s(),e.EFF(304," will add "),e.j41(305,"code"),e.EFF(306,"max: 10"),e.k0s(),e.EFF(307," to schema definition) "),e.k0s()(),e.j41(308,"tr")(309,"td")(310,"code"),e.EFF(311,"dtoKeyOfComment"),e.k0s()(),e.j41(312,"td")(313,"code"),e.EFF(314,"'description'"),e.k0s()(),e.j41(315,"td"),e.EFF(316,"The property key to set the comment text to on "),e.j41(317,"code"),e.EFF(318,"ApiProperty"),e.k0s(),e.EFF(319,"."),e.k0s()(),e.j41(320,"tr")(321,"td")(322,"code"),e.EFF(323,"controllerKeyOfComment"),e.k0s()(),e.j41(324,"td")(325,"code"),e.EFF(326,"'summary'"),e.k0s()(),e.j41(327,"td"),e.EFF(328,"The property key to set the comment text to on "),e.j41(329,"code"),e.EFF(330,"ApiOperation"),e.k0s(),e.EFF(331,"."),e.k0s()(),e.j41(332,"tr")(333,"td")(334,"code"),e.EFF(335,"introspectComments"),e.k0s()(),e.j41(336,"td")(337,"code"),e.EFF(338,"false"),e.k0s()(),e.j41(339,"td"),e.EFF(340,"If set to true, plugin will generate descriptions and example values for properties based on comments"),e.k0s()()(),e.j41(341,"p"),e.EFF(342,"Make sure to delete the "),e.j41(343,"code"),e.EFF(344,"/dist"),e.k0s(),e.EFF(345," folder and rebuild your application whenever plugin options are updated.\nIf you don't use the CLI but instead have a custom "),e.j41(346,"code"),e.EFF(347,"webpack"),e.k0s(),e.EFF(348," configuration, you can use this plugin in combination with "),e.j41(349,"code"),e.EFF(350,"ts-loader"),e.k0s(),e.EFF(351,":"),e.k0s(),e.j41(352,"pre")(353,"code",16),e.EFF(354,"\ngetCustomTransformers: (program: any) => ({\n  before: [require('@nestjs/swagger/plugin').before({}, program)]\n}),\n"),e.k0s()(),e.j41(355,"h4",17)(356,"span"),e.EFF(357,"SWC builder"),e.k0s()(),e.j41(358,"p"),e.EFF(359,"For standard setups (non-monorepo), to use CLI Plugins with the SWC builder, you need to enable type checking, as described "),e.j41(360,"a",18),e.EFF(361,"here"),e.k0s(),e.EFF(362,"."),e.k0s(),e.j41(363,"pre")(364,"code",19),e.EFF(365,"\n$ nest start -b swc --type-check\n"),e.k0s()(),e.j41(366,"p"),e.EFF(367,"For monorepo setups, follow the instructions "),e.j41(368,"a",20),e.EFF(369,"here"),e.k0s(),e.EFF(370,"."),e.k0s(),e.j41(371,"pre")(372,"code",19),e.EFF(373,"\n$ npx ts-node src/generate-metadata.ts\n# OR npx ts-node apps/{YOUR_APP}/src/generate-metadata.ts\n"),e.k0s()(),e.j41(374,"p"),e.EFF(375,"Now, the serialized metadata file must be loaded by the "),e.j41(376,"code"),e.EFF(377,"SwaggerModule#loadPluginMetadata"),e.k0s(),e.EFF(378," method, as shown below:"),e.k0s(),e.j41(379,"app-copy-button")(380,"pre")(381,"code",9),e.EFF(382,"\nimport metadata from './metadata'; // <-- file auto-generated by the \"PluginMetadataGenerator\"\n\nawait SwaggerModule.loadPluginMetadata(metadata); // <-- here\nconst document = SwaggerModule.createDocument(app, config);\n"),e.k0s()()(),e.j41(383,"h4",21)(384,"span"),e.EFF(385,"Integration with "),e.j41(386,"code"),e.EFF(387,"ts-jest"),e.k0s(),e.EFF(388," (e2e tests)"),e.k0s()(),e.j41(389,"p"),e.EFF(390,"To run e2e tests, "),e.j41(391,"code"),e.EFF(392,"ts-jest"),e.k0s(),e.EFF(393," compiles your source code files on the fly, in memory. This means, it doesn't use Nest CLI compiler and does not apply any plugins or perform AST transformations."),e.k0s(),e.j41(394,"p"),e.EFF(395,"To enable the plugin, create the following file in your e2e tests directory:"),e.k0s(),e.j41(396,"pre")(397,"code",16),e.EFF(398,"\nconst transformer = require('@nestjs/swagger/plugin');\n\nmodule.exports.name = 'nestjs-swagger-transformer';\n// you should change the version number anytime you change the configuration below - otherwise, jest will not detect changes\nmodule.exports.version = 1;\n\nmodule.exports.factory = (cs) => {\n  return transformer.before(\n    {\n      // @nestjs/swagger/plugin options (can be empty)\n    },\n    cs.program, // \"cs.tsCompiler.program\" for older versions of Jest (<= v27)\n  );\n};\n"),e.k0s()(),e.j41(399,"p"),e.EFF(400,"With this in place, import AST transformer within your "),e.j41(401,"code"),e.EFF(402,"jest"),e.k0s(),e.EFF(403," configuration file. By default (in the starter application), e2e tests configuration file is located under the "),e.j41(404,"code"),e.EFF(405,"test"),e.k0s(),e.EFF(406," folder and is named "),e.j41(407,"code"),e.EFF(408,"jest-e2e.json"),e.k0s(),e.EFF(409,"."),e.k0s(),e.j41(410,"p"),e.EFF(411,"If you use "),e.j41(412,"code"),e.EFF(413,"jest@<29"),e.k0s(),e.EFF(414,", then use the snippet below."),e.k0s(),e.j41(415,"pre")(416,"code",22),e.EFF(417,'\n{\n  ... // other configuration\n  "globals": {\n    "ts-jest": {\n      "astTransformers": {\n        "before": ["<path to the file created above>"]\n      }\n    }\n  }\n}\n'),e.k0s()(),e.j41(418,"p"),e.EFF(419,"If you use "),e.j41(420,"code"),e.EFF(421,"jest@^29"),e.k0s(),e.EFF(422,", then use the snippet below, as the previous approach got deprecated."),e.k0s(),e.j41(423,"pre")(424,"code",22),e.EFF(425,'\n{\n  ... // other configuration\n  "transform": {\n    "^.+\\\\.(t|j)s$": [\n      "ts-jest",\n      {\n        "astTransformers": {\n          "before": ["<path to the file created above>"]\n        }\n      }\n    ]\n  }\n}\n'),e.k0s()(),e.j41(426,"h4",23)(427,"span"),e.EFF(428,"Troubleshooting "),e.j41(429,"code"),e.EFF(430,"jest"),e.k0s(),e.EFF(431," (e2e tests)"),e.k0s()(),e.j41(432,"p"),e.EFF(433,"In case "),e.j41(434,"code"),e.EFF(435,"jest"),e.k0s(),e.EFF(436," does not seem to pick up your configuration changes, it's possible that Jest has already "),e.j41(437,"strong"),e.EFF(438,"cached"),e.k0s(),e.EFF(439," the build result. To apply the new configuration, you need to clear Jest's cache directory."),e.k0s(),e.j41(440,"p"),e.EFF(441,"To clear the cache directory, run the following command in your NestJS project folder:"),e.k0s(),e.j41(442,"pre")(443,"code",19),e.EFF(444,"\n$ npx jest --clearCache\n"),e.k0s()(),e.j41(445,"p"),e.EFF(446,"In case the automatic cache clearance fails, you can still manually remove the cache folder with the following commands:"),e.k0s(),e.j41(447,"pre")(448,"code",19),e.EFF(449,'\n# Find jest cache directory (usually /tmp/jest_rs)\n# by running the following command in your NestJS project root\n$ npx jest --showConfig | grep cache\n# ex result:\n#   "cache": true,\n#   "cacheDirectory": "/tmp/jest_rs"\n\n# Remove or empty the Jest cache directory\n$ rm -rf  <cacheDirectory value>\n# ex:\n# rm -rf /tmp/jest_rs\n'),e.k0s()()())},dependencies:[i.a,p.z,F.Wk],encapsulation:2,changeDetection:0})}return t})(),E=(()=>{class t extends r.y{static \u0275fac=(()=>{let o;return function(s){return(o||(o=e.xGo(t)))(s||t)}})();static \u0275cmp=e.VBU({type:t,selectors:[["app-decorators"]],features:[e.Vt3],decls:153,vars:0,consts:[["contentReference",""],[1,"content"],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/decorators.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","decorators"]],template:function(n,s){1&n&&(e.j41(0,"div",1,0)(2,"div",2)(3,"a",3),e.nrm(4,"i",4),e.k0s()(),e.j41(5,"h3",5),e.EFF(6,"Decorators"),e.k0s(),e.j41(7,"p"),e.EFF(8,"All of the available OpenAPI decorators have an "),e.j41(9,"code"),e.EFF(10,"Api"),e.k0s(),e.EFF(11," prefix to distinguish them from the core decorators. Below is a full list of the exported decorators along with a designation of the level at which the decorator may be applied."),e.k0s(),e.j41(12,"table"),e.nrm(13,"thead"),e.j41(14,"tbody")(15,"tr")(16,"td")(17,"code"),e.EFF(18,"@ApiBasicAuth()"),e.k0s()(),e.j41(19,"td"),e.EFF(20,"Method / Controller"),e.k0s()(),e.j41(21,"tr")(22,"td")(23,"code"),e.EFF(24,"@ApiBearerAuth()"),e.k0s()(),e.j41(25,"td"),e.EFF(26,"Method / Controller"),e.k0s()(),e.j41(27,"tr")(28,"td")(29,"code"),e.EFF(30,"@ApiBody()"),e.k0s()(),e.j41(31,"td"),e.EFF(32,"Method"),e.k0s()(),e.j41(33,"tr")(34,"td")(35,"code"),e.EFF(36,"@ApiConsumes()"),e.k0s()(),e.j41(37,"td"),e.EFF(38,"Method / Controller"),e.k0s()(),e.j41(39,"tr")(40,"td")(41,"code"),e.EFF(42,"@ApiCookieAuth()"),e.k0s()(),e.j41(43,"td"),e.EFF(44,"Method / Controller"),e.k0s()(),e.j41(45,"tr")(46,"td")(47,"code"),e.EFF(48,"@ApiExcludeController()"),e.k0s()(),e.j41(49,"td"),e.EFF(50,"Controller"),e.k0s()(),e.j41(51,"tr")(52,"td")(53,"code"),e.EFF(54,"@ApiExcludeEndpoint()"),e.k0s()(),e.j41(55,"td"),e.EFF(56,"Method"),e.k0s()(),e.j41(57,"tr")(58,"td")(59,"code"),e.EFF(60,"@ApiExtension()"),e.k0s()(),e.j41(61,"td"),e.EFF(62,"Method"),e.k0s()(),e.j41(63,"tr")(64,"td")(65,"code"),e.EFF(66,"@ApiExtraModels()"),e.k0s()(),e.j41(67,"td"),e.EFF(68,"Method / Controller"),e.k0s()(),e.j41(69,"tr")(70,"td")(71,"code"),e.EFF(72,"@ApiHeader()"),e.k0s()(),e.j41(73,"td"),e.EFF(74,"Method / Controller"),e.k0s()(),e.j41(75,"tr")(76,"td")(77,"code"),e.EFF(78,"@ApiHideProperty()"),e.k0s()(),e.j41(79,"td"),e.EFF(80,"Model"),e.k0s()(),e.j41(81,"tr")(82,"td")(83,"code"),e.EFF(84,"@ApiOAuth2()"),e.k0s()(),e.j41(85,"td"),e.EFF(86,"Method / Controller"),e.k0s()(),e.j41(87,"tr")(88,"td")(89,"code"),e.EFF(90,"@ApiOperation()"),e.k0s()(),e.j41(91,"td"),e.EFF(92,"Method"),e.k0s()(),e.j41(93,"tr")(94,"td")(95,"code"),e.EFF(96,"@ApiParam()"),e.k0s()(),e.j41(97,"td"),e.EFF(98,"Method / Controller"),e.k0s()(),e.j41(99,"tr")(100,"td")(101,"code"),e.EFF(102,"@ApiProduces()"),e.k0s()(),e.j41(103,"td"),e.EFF(104,"Method / Controller"),e.k0s()(),e.j41(105,"tr")(106,"td")(107,"code"),e.EFF(108,"@ApiSchema()"),e.k0s()(),e.j41(109,"td"),e.EFF(110,"Model"),e.k0s()(),e.j41(111,"tr")(112,"td")(113,"code"),e.EFF(114,"@ApiProperty()"),e.k0s()(),e.j41(115,"td"),e.EFF(116,"Model"),e.k0s()(),e.j41(117,"tr")(118,"td")(119,"code"),e.EFF(120,"@ApiPropertyOptional()"),e.k0s()(),e.j41(121,"td"),e.EFF(122,"Model"),e.k0s()(),e.j41(123,"tr")(124,"td")(125,"code"),e.EFF(126,"@ApiQuery()"),e.k0s()(),e.j41(127,"td"),e.EFF(128,"Method / Controller"),e.k0s()(),e.j41(129,"tr")(130,"td")(131,"code"),e.EFF(132,"@ApiResponse()"),e.k0s()(),e.j41(133,"td"),e.EFF(134,"Method / Controller"),e.k0s()(),e.j41(135,"tr")(136,"td")(137,"code"),e.EFF(138,"@ApiSecurity()"),e.k0s()(),e.j41(139,"td"),e.EFF(140,"Method / Controller"),e.k0s()(),e.j41(141,"tr")(142,"td")(143,"code"),e.EFF(144,"@ApiTags()"),e.k0s()(),e.j41(145,"td"),e.EFF(146,"Method / Controller"),e.k0s()(),e.j41(147,"tr")(148,"td")(149,"code"),e.EFF(150,"@ApiCallbacks()"),e.k0s()(),e.j41(151,"td"),e.EFF(152,"Method / Controller"),e.k0s()()()()())},encapsulation:2,changeDetection:0})}return t})();var h=a(5119),m=a(5663);let g=(()=>{class t extends r.y{static \u0275fac=(()=>{let o;return function(s){return(o||(o=e.xGo(t)))(s||t)}})();static \u0275cmp=e.VBU({type:t,selectors:[["app-introduction"]],features:[e.Vt3],decls:186,vars:4,consts:[["contentReference",""],["appa40e44a0f78372edbd185a91e94431eec5f7503e",""],[1,"content"],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/introduction.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","introduction"],["rel","nofollow","target","_blank","href","https://swagger.io/specification/"],["rel","nofollow","target","_blank","href","https://github.com/nestjs/swagger"],["appAnchor","","id","installation"],[1,"language-bash"],["appAnchor","","id","bootstrap"],[1,"with-heading"],[1,"filename"],[1,"language-typescript"],[1,"info"],["rel","nofollow","target","_blank","href","https://swagger.io/specification/#openapi-document"],["href","/openapi/introduction#document-options"],["href","/openapi/introduction#setup-options"],["src","/assets/swagger1.png"],[1,"warning"],["rel","nofollow","target","_blank","href","https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP"],["appAnchor","","id","document-options"],[1,"language-TypeScript"],["appAnchor","","id","setup-options"],["appAnchor","","id","example"],["rel","nofollow","target","_blank","href","https://github.com/nestjs/nest/tree/master/sample/11-swagger"]],template:function(n,s){if(1&n&&(e.j41(0,"div",2,0)(2,"div",3)(3,"a",4),e.nrm(4,"i",5),e.k0s()(),e.j41(5,"h3",6),e.EFF(6,"Introduction"),e.k0s(),e.j41(7,"p"),e.EFF(8,"The "),e.j41(9,"a",7),e.EFF(10,"OpenAPI"),e.k0s(),e.EFF(11," specification is a language-agnostic definition format used to describe RESTful APIs. Nest provides a dedicated "),e.j41(12,"a",8),e.EFF(13,"module"),e.k0s(),e.EFF(14," which allows generating such a specification by leveraging decorators."),e.k0s(),e.j41(15,"h4",9)(16,"span"),e.EFF(17,"Installation"),e.k0s()(),e.j41(18,"p"),e.EFF(19,"To begin using it, we first install the required dependency."),e.k0s(),e.j41(20,"pre")(21,"code",10),e.EFF(22,"\n$ npm install --save @nestjs/swagger\n"),e.k0s()(),e.j41(23,"h4",11)(24,"span"),e.EFF(25,"Bootstrap"),e.k0s()(),e.j41(26,"p"),e.EFF(27,"Once the installation process is complete, open the "),e.j41(28,"code"),e.EFF(29,"main.ts"),e.k0s(),e.EFF(30," file and initialize Swagger using the "),e.j41(31,"code"),e.EFF(32,"SwaggerModule"),e.k0s(),e.EFF(33," class:"),e.k0s(),e.j41(34,"app-copy-button",12)(35,"span",13),e.EFF(36),e.nI1(37,"extension"),e.nrm(38,"app-tabs",null,1),e.k0s(),e.j41(40,"pre")(41,"code",14),e.EFF(42,"\nimport { NestFactory } from '@nestjs/core';\nimport { SwaggerModule, DocumentBuilder } from '@nestjs/swagger';\nimport { AppModule } from './app.module';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n\n  const config = new DocumentBuilder()\n    .setTitle('Cats example')\n    .setDescription('The cats API description')\n    .setVersion('1.0')\n    .addTag('cats')\n    .build();\n  const documentFactory = () => SwaggerModule.createDocument(app, config);\n  SwaggerModule.setup('api', app, documentFactory);\n\n  await app.listen(process.env.PORT ?? 3000);\n}\nbootstrap();\n"),e.k0s()()(),e.j41(43,"blockquote",15)(44,"strong"),e.EFF(45,"Hint"),e.k0s(),e.EFF(46," The factory method "),e.j41(47,"code"),e.EFF(48,"SwaggerModule#createDocument()"),e.k0s(),e.EFF(49," is used specifically to generate the Swagger document when you request it. This approach helps save some initialization time, and the resulting document is a serializable object that conforms to the "),e.j41(50,"a",16),e.EFF(51,"OpenAPI Document"),e.k0s(),e.EFF(52," specification. Instead of serving the document over HTTP, you can also save it as a JSON or YAML file and use it in various ways.\n"),e.k0s(),e.j41(53,"p"),e.EFF(54,"The "),e.j41(55,"code"),e.EFF(56,"DocumentBuilder"),e.k0s(),e.EFF(57," helps to structure a base document that conforms to the OpenAPI Specification. It provides several methods that allow setting such properties as title, description, version, etc. In order to create a full document (with all HTTP routes defined) we use the "),e.j41(58,"code"),e.EFF(59,"createDocument()"),e.k0s(),e.EFF(60," method of the "),e.j41(61,"code"),e.EFF(62,"SwaggerModule"),e.k0s(),e.EFF(63," class. This method takes two arguments, an application instance and a Swagger options object. Alternatively, we can provide a third argument, which should be of type "),e.j41(64,"code"),e.EFF(65,"SwaggerDocumentOptions"),e.k0s(),e.EFF(66,". More on this in the "),e.j41(67,"a",17),e.EFF(68,"Document options section"),e.k0s(),e.EFF(69,"."),e.k0s(),e.j41(70,"p"),e.EFF(71,"Once we create a document, we can call the "),e.j41(72,"code"),e.EFF(73,"setup()"),e.k0s(),e.EFF(74," method. It accepts:"),e.k0s(),e.j41(75,"ol")(76,"li"),e.EFF(77,"The path to mount the Swagger UI"),e.k0s(),e.j41(78,"li"),e.EFF(79,"An application instance"),e.k0s(),e.j41(80,"li"),e.EFF(81,"The document object instantiated above"),e.k0s(),e.j41(82,"li"),e.EFF(83,"Optional configuration parameter (read more "),e.j41(84,"a",18),e.EFF(85,"here"),e.k0s(),e.EFF(86,")"),e.k0s()(),e.j41(87,"p"),e.EFF(88,"Now you can run the following command to start the HTTP server:"),e.k0s(),e.j41(89,"pre")(90,"code",10),e.EFF(91,"\n$ npm run start\n"),e.k0s()(),e.j41(92,"p"),e.EFF(93,"While the application is running, open your browser and navigate to "),e.j41(94,"code"),e.EFF(95,"http://localhost:3000/api"),e.k0s(),e.EFF(96,". You should see the Swagger UI."),e.k0s(),e.j41(97,"figure"),e.nrm(98,"img",19),e.k0s(),e.j41(99,"p"),e.EFF(100,"As you can see, the "),e.j41(101,"code"),e.EFF(102,"SwaggerModule"),e.k0s(),e.EFF(103," automatically reflects all of your endpoints."),e.k0s(),e.j41(104,"blockquote",15)(105,"strong"),e.EFF(106,"Hint"),e.k0s(),e.EFF(107," To generate and download a Swagger JSON file, navigate to "),e.j41(108,"code"),e.EFF(109,"http://localhost:3000/api-json"),e.k0s(),e.EFF(110," (assuming that your Swagger documentation is available under "),e.j41(111,"code"),e.EFF(112,"http://localhost:3000/api"),e.k0s(),e.EFF(113,").\nIt is also possible to expose it on a route of your choice using only the setup method from "),e.j41(114,"code"),e.EFF(115,"@nestjs/swagger"),e.k0s(),e.EFF(116,", like this:\n"),e.j41(117,"app-copy-button")(118,"pre")(119,"code",14),e.EFF(120,"\nSwaggerModule.setup('swagger', app, document, {\n  jsonDocumentUrl: 'swagger/json',\n});\n"),e.k0s()()(),e.j41(121,"p"),e.EFF(122,"Which would expose it at "),e.j41(123,"code"),e.EFF(124,"http://localhost:3000/swagger/json"),e.k0s()()(),e.j41(125,"blockquote",20)(126,"strong"),e.EFF(127,"Warning"),e.k0s(),e.EFF(128," When using "),e.j41(129,"code"),e.EFF(130,"fastify"),e.k0s(),e.EFF(131," and "),e.j41(132,"code"),e.EFF(133,"helmet"),e.k0s(),e.EFF(134,", there may be a problem with "),e.j41(135,"a",21),e.EFF(136,"CSP"),e.k0s(),e.EFF(137,", to solve this collision, configure the CSP as shown below:\n"),e.j41(138,"app-copy-button")(139,"pre")(140,"code",14),e.EFF(141,"\napp.register(helmet, {\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [`'self'`],\n      styleSrc: [`'self'`, `'unsafe-inline'`],\n      imgSrc: [`'self'`, 'data:', 'validator.swagger.io'],\n      scriptSrc: [`'self'`, `https: 'unsafe-inline'`],\n    },\n  },\n});\n\n// If you are not going to use CSP at all, you can use this:\napp.register(helmet, {\n  contentSecurityPolicy: false,\n});\n"),e.k0s()()()(),e.j41(142,"h4",22)(143,"span"),e.EFF(144,"Document options"),e.k0s()(),e.j41(145,"p"),e.EFF(146,"When creating a document, it is possible to provide some extra options to fine tune the library's behavior. These options should be of type "),e.j41(147,"code"),e.EFF(148,"SwaggerDocumentOptions"),e.k0s(),e.EFF(149,", which can be the following:"),e.k0s(),e.j41(150,"pre")(151,"code",23),e.EFF(152,"\nexport interface SwaggerDocumentOptions {\n  /**\n   * List of modules to include in the specification\n   */\n  include?: Function[];\n\n  /**\n   * Additional, extra models that should be inspected and included in the specification\n   */\n  extraModels?: Function[];\n\n  /**\n   * If `true`, swagger will ignore the global prefix set through `setGlobalPrefix()` method\n   */\n  ignoreGlobalPrefix?: boolean;\n\n  /**\n   * If `true`, swagger will also load routes from the modules imported by `include` modules\n   */\n  deepScanRoutes?: boolean;\n\n  /**\n   * Custom operationIdFactory that will be used to generate the `operationId`\n   * based on the `controllerKey`, `methodKey`, and version.\n   * @default () => controllerKey_methodKey_version\n   */\n  operationIdFactory?: OperationIdFactory;\n\n  /**\n   * Custom linkNameFactory that will be used to generate the name of links\n   * in the `links` field of responses\n   *\n   * @see [Link objects](https://swagger.io/docs/specification/links/)\n   *\n   * @default () => `${controllerKey}_${methodKey}_from_${fieldKey}`\n   */\n  linkNameFactory?: (\n    controllerKey: string,\n    methodKey: string,\n    fieldKey: string\n  ) => string;\n\n  /*\n   * Generate tags automatically based on the controller name.\n   * If `false`, you must use the `@ApiTags()` decorator to define tags.\n   * Otherwise, the controller name without the suffix `Controller` will be used.\n   * @default true\n   */\n  autoTagControllers?: boolean;\n}\n"),e.k0s()(),e.j41(153,"p"),e.EFF(154,"For example, if you want to make sure that the library generates operation names like "),e.j41(155,"code"),e.EFF(156,"createUser"),e.k0s(),e.EFF(157," instead of "),e.j41(158,"code"),e.EFF(159,"UserController_createUser"),e.k0s(),e.EFF(160,", you can set the following:"),e.k0s(),e.j41(161,"pre")(162,"code",23),e.EFF(163,"\nconst options: SwaggerDocumentOptions =  {\n  operationIdFactory: (\n    controllerKey: string,\n    methodKey: string\n  ) => methodKey\n};\nconst documentFactory = () => SwaggerModule.createDocument(app, config, options);\n"),e.k0s()(),e.j41(164,"h4",24)(165,"span"),e.EFF(166,"Setup options"),e.k0s()(),e.j41(167,"p"),e.EFF(168,"You can configure Swagger UI by passing the options object which fulfills the "),e.j41(169,"code"),e.EFF(170,"SwaggerCustomOptions"),e.k0s(),e.EFF(171," interface as a fourth argument of the "),e.j41(172,"code"),e.EFF(173,"SwaggerModule#setup"),e.k0s(),e.EFF(174," method."),e.k0s(),e.j41(175,"pre")(176,"code",23),e.EFF(177,"\nexport interface SwaggerCustomOptions {\n  /**\n   * If `true`, Swagger resources paths will be prefixed by the global prefix set through `setGlobalPrefix()`.\n   * Default: `false`.\n   * @see https://docs.nestjs.com/faq/global-prefix\n   */\n  useGlobalPrefix?: boolean;\n\n  /**\n   * If `false`, only API definitions (JSON and YAML) will be served (on `/{path}-json` and `/{path}-yaml`).\n   * This is particularly useful if you are already hosting a Swagger UI somewhere else and just want to serve API definitions.\n   * Default: `true`.\n   */\n  swaggerUiEnabled?: boolean;\n\n  /**\n   * Url point the API definition to load in Swagger UI.\n   */\n  swaggerUrl?: string;\n\n  /**\n   * Path of the JSON API definition to serve.\n   * Default: `<path>-json`.\n   */\n  jsonDocumentUrl?: string;\n\n  /**\n   * Path of the YAML API definition to serve.\n   * Default: `<path>-yaml`.\n   */\n  yamlDocumentUrl?: string;\n\n  /**\n   * Hook allowing to alter the OpenAPI document before being served.\n   * It's called after the document is generated and before it is served as JSON & YAML.\n   */\n  patchDocumentOnRequest?: <TRequest = any, TResponse = any>(\n    req: TRequest,\n    res: TResponse,\n    document: OpenAPIObject\n  ) => OpenAPIObject;\n\n  /**\n   * If `true`, the selector of OpenAPI definitions is displayed in the Swagger UI interface.\n   * Default: `false`.\n   */\n  explorer?: boolean;\n\n  /**\n   * Additional Swagger UI options\n   */\n  swaggerOptions?: SwaggerUiOptions;\n\n  /**\n   * Custom CSS styles to inject in Swagger UI page.\n   */\n  customCss?: string;\n\n  /**\n   * URL(s) of a custom CSS stylesheet to load in Swagger UI page.\n   */\n  customCssUrl?: string | string[];\n\n  /**\n   * URL(s) of custom JavaScript files to load in Swagger UI page.\n   */\n  customJs?: string | string[];\n\n  /**\n   * Custom JavaScript scripts to load in Swagger UI page.\n   */\n  customJsStr?: string | string[];\n\n  /**\n   * Custom favicon for Swagger UI page.\n   */\n  customfavIcon?: string;\n\n  /**\n   * Custom title for Swagger UI page.\n   */\n  customSiteTitle?: string;\n\n  /**\n   * File system path (ex: ./node_modules/swagger-ui-dist) containing static Swagger UI assets.\n   */\n  customSwaggerUiPath?: string;\n\n  /**\n   * @deprecated This property has no effect.\n   */\n  validatorUrl?: string;\n\n  /**\n   * @deprecated This property has no effect.\n   */\n  url?: string;\n\n  /**\n   * @deprecated This property has no effect.\n   */\n  urls?: Record<'url' | 'name', string>[];\n\n}\n"),e.k0s()(),e.j41(178,"h4",25)(179,"span"),e.EFF(180,"Example"),e.k0s()(),e.j41(181,"p"),e.EFF(182,"A working example is available "),e.j41(183,"a",26),e.EFF(184,"here"),e.k0s(),e.EFF(185,"."),e.k0s()()),2&n){const v=e.sdS(39);e.R7$(36),e.SpI(" ",e.i5U(37,1,"main",v.isJsActive),"\n")}},dependencies:[h.O,i.a,p.z,m.M],encapsulation:2,changeDetection:0})}return t})(),k=(()=>{class t extends r.y{static \u0275fac=(()=>{let o;return function(s){return(o||(o=e.xGo(t)))(s||t)}})();static \u0275cmp=e.VBU({type:t,selectors:[["app-mapped-types"]],features:[e.Vt3],decls:178,vars:0,consts:[["contentReference",""],[1,"content"],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/mapped-types.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","mapped-types"],["appAnchor","","id","partial"],[1,"language-typescript"],[1,"info"],["appAnchor","","id","pick"],["appAnchor","","id","omit"],["appAnchor","","id","intersection"],["appAnchor","","id","composition"]],template:function(n,s){1&n&&(e.j41(0,"div",1,0)(2,"div",2)(3,"a",3),e.nrm(4,"i",4),e.k0s()(),e.j41(5,"h3",5),e.EFF(6,"Mapped types"),e.k0s(),e.j41(7,"p"),e.EFF(8,"As you build out features like "),e.j41(9,"strong"),e.EFF(10,"CRUD"),e.k0s(),e.EFF(11," (Create/Read/Update/Delete) it's often useful to construct variants on a base entity type. Nest provides several utility functions that perform type transformations to make this task more convenient."),e.k0s(),e.j41(12,"h4",6)(13,"span"),e.EFF(14,"Partial"),e.k0s()(),e.j41(15,"p"),e.EFF(16,"When building input validation types (also called DTOs), it's often useful to build "),e.j41(17,"strong"),e.EFF(18,"create"),e.k0s(),e.EFF(19," and "),e.j41(20,"strong"),e.EFF(21,"update"),e.k0s(),e.EFF(22," variations on the same type. For example, the "),e.j41(23,"strong"),e.EFF(24,"create"),e.k0s(),e.EFF(25," variant may require all fields, while the "),e.j41(26,"strong"),e.EFF(27,"update"),e.k0s(),e.EFF(28," variant may make all fields optional."),e.k0s(),e.j41(29,"p"),e.EFF(30,"Nest provides the "),e.j41(31,"code"),e.EFF(32,"PartialType()"),e.k0s(),e.EFF(33," utility function to make this task easier and minimize boilerplate."),e.k0s(),e.j41(34,"p"),e.EFF(35,"The "),e.j41(36,"code"),e.EFF(37,"PartialType()"),e.k0s(),e.EFF(38," function returns a type (class) with all the properties of the input type set to optional. For example, suppose we have a "),e.j41(39,"strong"),e.EFF(40,"create"),e.k0s(),e.EFF(41," type as follows:"),e.k0s(),e.j41(42,"app-copy-button")(43,"pre")(44,"code",7),e.EFF(45,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.k0s()()(),e.j41(46,"p"),e.EFF(47,"By default, all of these fields are required. To create a type with the same fields, but with each one optional, use "),e.j41(48,"code"),e.EFF(49,"PartialType()"),e.k0s(),e.EFF(50," passing the class reference ("),e.j41(51,"code"),e.EFF(52,"CreateCatDto"),e.k0s(),e.EFF(53,") as an argument:"),e.k0s(),e.j41(54,"app-copy-button")(55,"pre")(56,"code",7),e.EFF(57,"\nexport class UpdateCatDto extends PartialType(CreateCatDto) {}\n"),e.k0s()()(),e.j41(58,"blockquote",8)(59,"strong"),e.EFF(60,"Hint"),e.k0s(),e.EFF(61," The "),e.j41(62,"code"),e.EFF(63,"PartialType()"),e.k0s(),e.EFF(64," function is imported from the "),e.j41(65,"code"),e.EFF(66,"@nestjs/swagger"),e.k0s(),e.EFF(67," package.\n"),e.k0s(),e.j41(68,"h4",9)(69,"span"),e.EFF(70,"Pick"),e.k0s()(),e.j41(71,"p"),e.EFF(72,"The "),e.j41(73,"code"),e.EFF(74,"PickType()"),e.k0s(),e.EFF(75," function constructs a new type (class) by picking a set of properties from an input type. For example, suppose we start with a type like:"),e.k0s(),e.j41(76,"app-copy-button")(77,"pre")(78,"code",7),e.EFF(79,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.k0s()()(),e.j41(80,"p"),e.EFF(81,"We can pick a set of properties from this class using the "),e.j41(82,"code"),e.EFF(83,"PickType()"),e.k0s(),e.EFF(84," utility function:"),e.k0s(),e.j41(85,"app-copy-button")(86,"pre")(87,"code",7),e.EFF(88,"\nexport class UpdateCatAgeDto extends PickType(CreateCatDto, ['age'] as const) {}\n"),e.k0s()()(),e.j41(89,"blockquote",8)(90,"strong"),e.EFF(91,"Hint"),e.k0s(),e.EFF(92," The "),e.j41(93,"code"),e.EFF(94,"PickType()"),e.k0s(),e.EFF(95," function is imported from the "),e.j41(96,"code"),e.EFF(97,"@nestjs/swagger"),e.k0s(),e.EFF(98," package.\n"),e.k0s(),e.j41(99,"h4",10)(100,"span"),e.EFF(101,"Omit"),e.k0s()(),e.j41(102,"p"),e.EFF(103,"The "),e.j41(104,"code"),e.EFF(105,"OmitType()"),e.k0s(),e.EFF(106," function constructs a type by picking all properties from an input type and then removing a particular set of keys. For example, suppose we start with a type like:"),e.k0s(),e.j41(107,"app-copy-button")(108,"pre")(109,"code",7),e.EFF(110,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.k0s()()(),e.j41(111,"p"),e.EFF(112,"We can generate a derived type that has every property "),e.j41(113,"strong"),e.EFF(114,"except"),e.k0s(),e.j41(115,"code"),e.EFF(116,"name"),e.k0s(),e.EFF(117," as shown below. In this construct, the second argument to "),e.j41(118,"code"),e.EFF(119,"OmitType"),e.k0s(),e.EFF(120," is an array of property names."),e.k0s(),e.j41(121,"app-copy-button")(122,"pre")(123,"code",7),e.EFF(124,"\nexport class UpdateCatDto extends OmitType(CreateCatDto, ['name'] as const) {}\n"),e.k0s()()(),e.j41(125,"blockquote",8)(126,"strong"),e.EFF(127,"Hint"),e.k0s(),e.EFF(128," The "),e.j41(129,"code"),e.EFF(130,"OmitType()"),e.k0s(),e.EFF(131," function is imported from the "),e.j41(132,"code"),e.EFF(133,"@nestjs/swagger"),e.k0s(),e.EFF(134," package.\n"),e.k0s(),e.j41(135,"h4",11)(136,"span"),e.EFF(137,"Intersection"),e.k0s()(),e.j41(138,"p"),e.EFF(139,"The "),e.j41(140,"code"),e.EFF(141,"IntersectionType()"),e.k0s(),e.EFF(142," function combines two types into one new type (class). For example, suppose we start with two types like:"),e.k0s(),e.j41(143,"app-copy-button")(144,"pre")(145,"code",7),e.EFF(146,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  breed: string;\n}\n\nexport class AdditionalCatInfo {\n  @ApiProperty()\n  color: string;\n}\n"),e.k0s()()(),e.j41(147,"p"),e.EFF(148,"We can generate a new type that combines all properties in both types."),e.k0s(),e.j41(149,"app-copy-button")(150,"pre")(151,"code",7),e.EFF(152,"\nexport class UpdateCatDto extends IntersectionType(\n  CreateCatDto,\n  AdditionalCatInfo,\n) {}\n"),e.k0s()()(),e.j41(153,"blockquote",8)(154,"strong"),e.EFF(155,"Hint"),e.k0s(),e.EFF(156," The "),e.j41(157,"code"),e.EFF(158,"IntersectionType()"),e.k0s(),e.EFF(159," function is imported from the "),e.j41(160,"code"),e.EFF(161,"@nestjs/swagger"),e.k0s(),e.EFF(162," package.\n"),e.k0s(),e.j41(163,"h4",12)(164,"span"),e.EFF(165,"Composition"),e.k0s()(),e.j41(166,"p"),e.EFF(167,"The type mapping utility functions are composable. For example, the following will produce a type (class) that has all of the properties of the "),e.j41(168,"code"),e.EFF(169,"CreateCatDto"),e.k0s(),e.EFF(170," type except for "),e.j41(171,"code"),e.EFF(172,"name"),e.k0s(),e.EFF(173,", and those properties will be set to optional:"),e.k0s(),e.j41(174,"app-copy-button")(175,"pre")(176,"code",7),e.EFF(177,"\nexport class UpdateCatDto extends PartialType(\n  OmitType(CreateCatDto, ['name'] as const),\n) {}\n"),e.k0s()()()())},dependencies:[i.a,p.z],encapsulation:2,changeDetection:0})}return t})();var j=a(7077);let y=(()=>{class t extends r.y{static \u0275fac=(()=>{let o;return function(s){return(o||(o=e.xGo(t)))(s||t)}})();static \u0275cmp=e.VBU({type:t,selectors:[["app-openapi-migration"]],features:[e.Vt3],decls:129,vars:4,consts:[["contentReference",""],[1,"content"],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/migration-guide.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","migration-guide"],["appAnchor","","id","breaking-changes"],["appAnchor","","id","new-methods"]],template:function(n,s){1&n&&(e.j41(0,"div",1,0)(2,"div",2)(3,"a",3),e.nrm(4,"i",4),e.k0s()(),e.j41(5,"h3",5),e.EFF(6,"Migration guide"),e.k0s(),e.j41(7,"p"),e.EFF(8,"If you're currently using "),e.j41(9,"code"),e.EFF(10,"@nestjs/swagger@3.*"),e.k0s(),e.EFF(11,", note the following breaking/API changes in version 4.0."),e.k0s(),e.j41(12,"h4",6)(13,"span"),e.EFF(14,"Breaking changes"),e.k0s()(),e.j41(15,"p"),e.EFF(16,"The following decorators have been changed/renamed:"),e.k0s(),e.j41(17,"ul")(18,"li")(19,"code"),e.EFF(20,"@ApiModelProperty"),e.k0s(),e.EFF(21," is now "),e.j41(22,"code"),e.EFF(23,"@ApiProperty"),e.k0s()(),e.j41(24,"li")(25,"code"),e.EFF(26,"@ApiModelPropertyOptional"),e.k0s(),e.EFF(27," is now "),e.j41(28,"code"),e.EFF(29,"@ApiPropertyOptional"),e.k0s()(),e.j41(30,"li")(31,"code"),e.EFF(32,"@ApiResponseModelProperty"),e.k0s(),e.EFF(33," is now "),e.j41(34,"code"),e.EFF(35,"@ApiResponseProperty"),e.k0s()(),e.j41(36,"li")(37,"code"),e.EFF(38,"@ApiImplicitQuery"),e.k0s(),e.EFF(39," is now "),e.j41(40,"code"),e.EFF(41,"@ApiQuery"),e.k0s()(),e.j41(42,"li")(43,"code"),e.EFF(44,"@ApiImplicitParam"),e.k0s(),e.EFF(45," is now "),e.j41(46,"code"),e.EFF(47,"@ApiParam"),e.k0s()(),e.j41(48,"li")(49,"code"),e.EFF(50,"@ApiImplicitBody"),e.k0s(),e.EFF(51," is now "),e.j41(52,"code"),e.EFF(53,"@ApiBody"),e.k0s()(),e.j41(54,"li")(55,"code"),e.EFF(56,"@ApiImplicitHeader"),e.k0s(),e.EFF(57," is now "),e.j41(58,"code"),e.EFF(59,"@ApiHeader"),e.k0s()(),e.j41(60,"li")(61,"code"),e.EFF(62),e.k0s(),e.EFF(63," is now "),e.j41(64,"code"),e.EFF(65),e.k0s()(),e.j41(66,"li")(67,"code"),e.EFF(68,"@ApiUseTags"),e.k0s(),e.EFF(69," is now "),e.j41(70,"code"),e.EFF(71,"@ApiTags"),e.k0s()()(),e.j41(72,"p")(73,"code"),e.EFF(74,"DocumentBuilder"),e.k0s(),e.EFF(75," breaking changes (updated method signatures):"),e.k0s(),e.j41(76,"ul")(77,"li")(78,"code"),e.EFF(79,"addTag"),e.k0s()(),e.j41(80,"li")(81,"code"),e.EFF(82,"addBearerAuth"),e.k0s()(),e.j41(83,"li")(84,"code"),e.EFF(85,"addOAuth2"),e.k0s()(),e.j41(86,"li")(87,"code"),e.EFF(88,"setContactEmail"),e.k0s(),e.EFF(89," is now "),e.j41(90,"code"),e.EFF(91,"setContact"),e.k0s()(),e.j41(92,"li")(93,"code"),e.EFF(94,"setHost"),e.k0s(),e.EFF(95," has been removed"),e.k0s(),e.j41(96,"li")(97,"code"),e.EFF(98,"setSchemes"),e.k0s(),e.EFF(99," has been removed (use the "),e.j41(100,"code"),e.EFF(101,"addServer"),e.k0s(),e.EFF(102," instead, e.g., "),e.j41(103,"code"),e.EFF(104,"addServer('http://')"),e.k0s(),e.EFF(105,")"),e.k0s()(),e.j41(106,"h4",7)(107,"span"),e.EFF(108,"New methods"),e.k0s()(),e.j41(109,"p"),e.EFF(110,"The following methods have been added:"),e.k0s(),e.j41(111,"ul")(112,"li")(113,"code"),e.EFF(114,"addServer"),e.k0s()(),e.j41(115,"li")(116,"code"),e.EFF(117,"addApiKey"),e.k0s()(),e.j41(118,"li")(119,"code"),e.EFF(120,"addBasicAuth"),e.k0s()(),e.j41(121,"li")(122,"code"),e.EFF(123,"addSecurity"),e.k0s()(),e.j41(124,"li")(125,"code"),e.EFF(126,"addSecurityRequirements"),e.k0s()()(),e.j41(127,"p"),e.nrm(128,"app-banner-devtools"),e.k0s()()),2&n&&(e.R7$(62),e.Lme("@ApiOperation(","{"," title: 'test' ","}",")"),e.R7$(3),e.Lme("@ApiOperation(","{"," summary: 'test' ","}",")"))},dependencies:[i.a,j._],encapsulation:2,changeDetection:0})}return t})(),f=(()=>{class t extends r.y{static \u0275fac=(()=>{let o;return function(s){return(o||(o=e.xGo(t)))(s||t)}})();static \u0275cmp=e.VBU({type:t,selectors:[["app-openapi-operations"]],features:[e.Vt3],decls:385,vars:0,consts:[["contentReference",""],[1,"content"],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/operations.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","operations"],["appAnchor","","id","tags"],[1,"language-typescript"],["appAnchor","","id","headers"],["appAnchor","","id","responses"],["src","/assets/swagger-response-type.png"],["appAnchor","","id","file-upload"],["routerLink","/techniques/file-upload"],["appAnchor","","id","extensions"],["appAnchor","","id","advanced-generic-apiresponse"],["href","/openapi/types-and-parameters#raw-definitions"],[1,"language-ts"],["href","/openapi/types-and-parameters#extra-models"],[1,"language-json"],[1,"info"]],template:function(n,s){1&n&&(e.j41(0,"div",1,0)(2,"div",2)(3,"a",3),e.nrm(4,"i",4),e.k0s()(),e.j41(5,"h3",5),e.EFF(6,"Operations"),e.k0s(),e.j41(7,"p"),e.EFF(8,"In OpenAPI terms, paths are endpoints (resources), such as "),e.j41(9,"code"),e.EFF(10,"/users"),e.k0s(),e.EFF(11," or "),e.j41(12,"code"),e.EFF(13,"/reports/summary"),e.k0s(),e.EFF(14,", that your API exposes, and operations are the HTTP methods used to manipulate these paths, such as "),e.j41(15,"code"),e.EFF(16,"GET"),e.k0s(),e.EFF(17,", "),e.j41(18,"code"),e.EFF(19,"POST"),e.k0s(),e.EFF(20," or "),e.j41(21,"code"),e.EFF(22,"DELETE"),e.k0s(),e.EFF(23,"."),e.k0s(),e.j41(24,"h4",6)(25,"span"),e.EFF(26,"Tags"),e.k0s()(),e.j41(27,"p"),e.EFF(28,"To attach a controller to a specific tag, use the "),e.j41(29,"code"),e.EFF(30,"@ApiTags(...tags)"),e.k0s(),e.EFF(31," decorator."),e.k0s(),e.j41(32,"app-copy-button")(33,"pre")(34,"code",7),e.EFF(35,"\n@ApiTags('cats')\n@Controller('cats')\nexport class CatsController {}\n"),e.k0s()()(),e.j41(36,"h4",8)(37,"span"),e.EFF(38,"Headers"),e.k0s()(),e.j41(39,"p"),e.EFF(40,"To define custom headers that are expected as part of the request, use "),e.j41(41,"code"),e.EFF(42,"@ApiHeader()"),e.k0s(),e.EFF(43,"."),e.k0s(),e.j41(44,"app-copy-button")(45,"pre")(46,"code",7),e.EFF(47,"\n@ApiHeader({\n  name: 'X-MyHeader',\n  description: 'Custom header',\n})\n@Controller('cats')\nexport class CatsController {}\n"),e.k0s()()(),e.j41(48,"h4",9)(49,"span"),e.EFF(50,"Responses"),e.k0s()(),e.j41(51,"p"),e.EFF(52,"To define a custom HTTP response, use the "),e.j41(53,"code"),e.EFF(54,"@ApiResponse()"),e.k0s(),e.EFF(55," decorator."),e.k0s(),e.j41(56,"app-copy-button")(57,"pre")(58,"code",7),e.EFF(59,"\n@Post()\n@ApiResponse({ status: 201, description: 'The record has been successfully created.'})\n@ApiResponse({ status: 403, description: 'Forbidden.'})\nasync create(@Body() createCatDto: CreateCatDto) {\n  this.catsService.create(createCatDto);\n}\n"),e.k0s()()(),e.j41(60,"p"),e.EFF(61,"Nest provides a set of short-hand "),e.j41(62,"strong"),e.EFF(63,"API response"),e.k0s(),e.EFF(64," decorators that inherit from the "),e.j41(65,"code"),e.EFF(66,"@ApiResponse"),e.k0s(),e.EFF(67," decorator:"),e.k0s(),e.j41(68,"ul")(69,"li")(70,"code"),e.EFF(71,"@ApiOkResponse()"),e.k0s()(),e.j41(72,"li")(73,"code"),e.EFF(74,"@ApiCreatedResponse()"),e.k0s()(),e.j41(75,"li")(76,"code"),e.EFF(77,"@ApiAcceptedResponse()"),e.k0s()(),e.j41(78,"li")(79,"code"),e.EFF(80,"@ApiNoContentResponse()"),e.k0s()(),e.j41(81,"li")(82,"code"),e.EFF(83,"@ApiMovedPermanentlyResponse()"),e.k0s()(),e.j41(84,"li")(85,"code"),e.EFF(86,"@ApiFoundResponse()"),e.k0s()(),e.j41(87,"li")(88,"code"),e.EFF(89,"@ApiBadRequestResponse()"),e.k0s()(),e.j41(90,"li")(91,"code"),e.EFF(92,"@ApiUnauthorizedResponse()"),e.k0s()(),e.j41(93,"li")(94,"code"),e.EFF(95,"@ApiNotFoundResponse()"),e.k0s()(),e.j41(96,"li")(97,"code"),e.EFF(98,"@ApiForbiddenResponse()"),e.k0s()(),e.j41(99,"li")(100,"code"),e.EFF(101,"@ApiMethodNotAllowedResponse()"),e.k0s()(),e.j41(102,"li")(103,"code"),e.EFF(104,"@ApiNotAcceptableResponse()"),e.k0s()(),e.j41(105,"li")(106,"code"),e.EFF(107,"@ApiRequestTimeoutResponse()"),e.k0s()(),e.j41(108,"li")(109,"code"),e.EFF(110,"@ApiConflictResponse()"),e.k0s()(),e.j41(111,"li")(112,"code"),e.EFF(113,"@ApiPreconditionFailedResponse()"),e.k0s()(),e.j41(114,"li")(115,"code"),e.EFF(116,"@ApiTooManyRequestsResponse()"),e.k0s()(),e.j41(117,"li")(118,"code"),e.EFF(119,"@ApiGoneResponse()"),e.k0s()(),e.j41(120,"li")(121,"code"),e.EFF(122,"@ApiPayloadTooLargeResponse()"),e.k0s()(),e.j41(123,"li")(124,"code"),e.EFF(125,"@ApiUnsupportedMediaTypeResponse()"),e.k0s()(),e.j41(126,"li")(127,"code"),e.EFF(128,"@ApiUnprocessableEntityResponse()"),e.k0s()(),e.j41(129,"li")(130,"code"),e.EFF(131,"@ApiInternalServerErrorResponse()"),e.k0s()(),e.j41(132,"li")(133,"code"),e.EFF(134,"@ApiNotImplementedResponse()"),e.k0s()(),e.j41(135,"li")(136,"code"),e.EFF(137,"@ApiBadGatewayResponse()"),e.k0s()(),e.j41(138,"li")(139,"code"),e.EFF(140,"@ApiServiceUnavailableResponse()"),e.k0s()(),e.j41(141,"li")(142,"code"),e.EFF(143,"@ApiGatewayTimeoutResponse()"),e.k0s()(),e.j41(144,"li")(145,"code"),e.EFF(146,"@ApiDefaultResponse()"),e.k0s()()(),e.j41(147,"app-copy-button")(148,"pre")(149,"code",7),e.EFF(150,"\n@Post()\n@ApiCreatedResponse({ description: 'The record has been successfully created.'})\n@ApiForbiddenResponse({ description: 'Forbidden.'})\nasync create(@Body() createCatDto: CreateCatDto) {\n  this.catsService.create(createCatDto);\n}\n"),e.k0s()()(),e.j41(151,"p"),e.EFF(152,"To specify a return model for a request, we must create a class and annotate all properties with the "),e.j41(153,"code"),e.EFF(154,"@ApiProperty()"),e.k0s(),e.EFF(155," decorator."),e.k0s(),e.j41(156,"app-copy-button")(157,"pre")(158,"code",7),e.EFF(159,"\nexport class Cat {\n  @ApiProperty()\n  id: number;\n\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.k0s()()(),e.j41(160,"p"),e.EFF(161,"Then the "),e.j41(162,"code"),e.EFF(163,"Cat"),e.k0s(),e.EFF(164," model can be used in combination with the "),e.j41(165,"code"),e.EFF(166,"type"),e.k0s(),e.EFF(167," property of the response decorator."),e.k0s(),e.j41(168,"app-copy-button")(169,"pre")(170,"code",7),e.EFF(171,"\n@ApiTags('cats')\n@Controller('cats')\nexport class CatsController {\n  @Post()\n  @ApiCreatedResponse({\n    description: 'The record has been successfully created.',\n    type: Cat,\n  })\n  async create(@Body() createCatDto: CreateCatDto): Promise<Cat> {\n    return this.catsService.create(createCatDto);\n  }\n}\n"),e.k0s()()(),e.j41(172,"p"),e.EFF(173,"Let's open the browser and verify the generated "),e.j41(174,"code"),e.EFF(175,"Cat"),e.k0s(),e.EFF(176," model:"),e.k0s(),e.j41(177,"figure"),e.nrm(178,"img",10),e.k0s(),e.j41(179,"h4",11)(180,"span"),e.EFF(181,"File upload"),e.k0s()(),e.j41(182,"p"),e.EFF(183,"You can enable file upload for a specific method with the "),e.j41(184,"code"),e.EFF(185,"@ApiBody"),e.k0s(),e.EFF(186," decorator together with "),e.j41(187,"code"),e.EFF(188,"@ApiConsumes()"),e.k0s(),e.EFF(189,". Here's a full example using the "),e.j41(190,"a",12),e.EFF(191,"File Upload"),e.k0s(),e.EFF(192," technique:"),e.k0s(),e.j41(193,"app-copy-button")(194,"pre")(195,"code",7),e.EFF(196,"\n@UseInterceptors(FileInterceptor('file'))\n@ApiConsumes('multipart/form-data')\n@ApiBody({\n  description: 'List of cats',\n  type: FileUploadDto,\n})\nuploadFile(@UploadedFile() file) {}\n"),e.k0s()()(),e.j41(197,"p"),e.EFF(198,"Where "),e.j41(199,"code"),e.EFF(200,"FileUploadDto"),e.k0s(),e.EFF(201," is defined as follows:"),e.k0s(),e.j41(202,"app-copy-button")(203,"pre")(204,"code",7),e.EFF(205,"\nclass FileUploadDto {\n  @ApiProperty({ type: 'string', format: 'binary' })\n  file: any;\n}\n"),e.k0s()()(),e.j41(206,"p"),e.EFF(207,"To handle multiple files uploading, you can define "),e.j41(208,"code"),e.EFF(209,"FilesUploadDto"),e.k0s(),e.EFF(210," as follows:"),e.k0s(),e.j41(211,"app-copy-button")(212,"pre")(213,"code",7),e.EFF(214,"\nclass FilesUploadDto {\n  @ApiProperty({ type: 'array', items: { type: 'string', format: 'binary' } })\n  files: any[];\n}\n"),e.k0s()()(),e.j41(215,"h4",13)(216,"span"),e.EFF(217,"Extensions"),e.k0s()(),e.j41(218,"p"),e.EFF(219,"To add an Extension to a request use the "),e.j41(220,"code"),e.EFF(221,"@ApiExtension()"),e.k0s(),e.EFF(222," decorator. The extension name must be prefixed with "),e.j41(223,"code"),e.EFF(224,"x-"),e.k0s(),e.EFF(225,"."),e.k0s(),e.j41(226,"app-copy-button")(227,"pre")(228,"code",7),e.EFF(229,"\n@ApiExtension('x-foo', { hello: 'world' })\n"),e.k0s()()(),e.j41(230,"h4",14)(231,"span"),e.EFF(232,"Advanced: Generic "),e.j41(233,"code"),e.EFF(234,"ApiResponse"),e.k0s()()(),e.j41(235,"p"),e.EFF(236,"With the ability to provide "),e.j41(237,"a",15),e.EFF(238,"Raw Definitions"),e.k0s(),e.EFF(239,", we can define Generic schema for Swagger UI. Assume we have the following DTO:"),e.k0s(),e.j41(240,"app-copy-button")(241,"pre")(242,"code",16),e.EFF(243,"\nexport class PaginatedDto<TData> {\n  @ApiProperty()\n  total: number;\n\n  @ApiProperty()\n  limit: number;\n\n  @ApiProperty()\n  offset: number;\n\n  results: TData[];\n}\n"),e.k0s()()(),e.j41(244,"p"),e.EFF(245,"We skip decorating "),e.j41(246,"code"),e.EFF(247,"results"),e.k0s(),e.EFF(248," as we will be providing a raw definition for it later. Now, let's define another DTO and name it, for example, "),e.j41(249,"code"),e.EFF(250,"CatDto"),e.k0s(),e.EFF(251,", as follows:"),e.k0s(),e.j41(252,"app-copy-button")(253,"pre")(254,"code",16),e.EFF(255,"\nexport class CatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.k0s()()(),e.j41(256,"p"),e.EFF(257,"With this in place, we can define a "),e.j41(258,"code"),e.EFF(259,"PaginatedDto<CatDto>"),e.k0s(),e.EFF(260," response, as follows:"),e.k0s(),e.j41(261,"app-copy-button")(262,"pre")(263,"code",16),e.EFF(264,"\n@ApiOkResponse({\n  schema: {\n    allOf: [\n      { $ref: getSchemaPath(PaginatedDto) },\n      {\n        properties: {\n          results: {\n            type: 'array',\n            items: { $ref: getSchemaPath(CatDto) },\n          },\n        },\n      },\n    ],\n  },\n})\nasync findAll(): Promise<PaginatedDto<CatDto>> {}\n"),e.k0s()()(),e.j41(265,"p"),e.EFF(266,"In this example, we specify that the response will have allOf "),e.j41(267,"code"),e.EFF(268,"PaginatedDto"),e.k0s(),e.EFF(269," and the "),e.j41(270,"code"),e.EFF(271,"results"),e.k0s(),e.EFF(272," property will be of type "),e.j41(273,"code"),e.EFF(274,"Array<CatDto>"),e.k0s(),e.EFF(275,"."),e.k0s(),e.j41(276,"ul")(277,"li")(278,"code"),e.EFF(279,"getSchemaPath()"),e.k0s(),e.EFF(280," function that returns the OpenAPI Schema path from within the OpenAPI Spec File for a given model."),e.k0s(),e.j41(281,"li")(282,"code"),e.EFF(283,"allOf"),e.k0s(),e.EFF(284," is a concept that OAS 3 provides to cover various Inheritance related use-cases."),e.k0s()(),e.j41(285,"p"),e.EFF(286,"Lastly, since "),e.j41(287,"code"),e.EFF(288,"PaginatedDto"),e.k0s(),e.EFF(289," is not directly referenced by any controller, the "),e.j41(290,"code"),e.EFF(291,"SwaggerModule"),e.k0s(),e.EFF(292," will not be able to generate a corresponding model definition just yet. In this case, we must add it as an "),e.j41(293,"a",17),e.EFF(294,"Extra Model"),e.k0s(),e.EFF(295,". For example, we can use the "),e.j41(296,"code"),e.EFF(297,"@ApiExtraModels()"),e.k0s(),e.EFF(298," decorator on the controller level, as follows:"),e.k0s(),e.j41(299,"app-copy-button")(300,"pre")(301,"code",16),e.EFF(302,"\n@Controller('cats')\n@ApiExtraModels(PaginatedDto)\nexport class CatsController {}\n"),e.k0s()()(),e.j41(303,"p"),e.EFF(304,"If you run Swagger now, the generated "),e.j41(305,"code"),e.EFF(306,"swagger.json"),e.k0s(),e.EFF(307," for this specific endpoint should have the following response defined:"),e.k0s(),e.j41(308,"pre")(309,"code",18),e.EFF(310,'\n"responses": {\n  "200": {\n    "description": "",\n    "content": {\n      "application/json": {\n        "schema": {\n          "allOf": [\n            {\n              "$ref": "#/components/schemas/PaginatedDto"\n            },\n            {\n              "properties": {\n                "results": {\n                  "$ref": "#/components/schemas/CatDto"\n                }\n              }\n            }\n          ]\n        }\n      }\n    }\n  }\n}\n'),e.k0s()(),e.j41(311,"p"),e.EFF(312,"To make it reusable, we can create a custom decorator for "),e.j41(313,"code"),e.EFF(314,"PaginatedDto"),e.k0s(),e.EFF(315,", as follows:"),e.k0s(),e.j41(316,"app-copy-button")(317,"pre")(318,"code",16),e.EFF(319,"\nexport const ApiPaginatedResponse = <TModel extends Type<any>>(\n  model: TModel,\n) => {\n  return applyDecorators(\n    ApiExtraModels(PaginatedDto, model),\n    ApiOkResponse({\n      schema: {\n        allOf: [\n          { $ref: getSchemaPath(PaginatedDto) },\n          {\n            properties: {\n              results: {\n                type: 'array',\n                items: { $ref: getSchemaPath(model) },\n              },\n            },\n          },\n        ],\n      },\n    }),\n  );\n};\n"),e.k0s()()(),e.j41(320,"blockquote",19)(321,"strong"),e.EFF(322,"Hint"),e.k0s(),e.j41(323,"code"),e.EFF(324,"Type<any>"),e.k0s(),e.EFF(325," interface and "),e.j41(326,"code"),e.EFF(327,"applyDecorators"),e.k0s(),e.EFF(328," function are imported from the "),e.j41(329,"code"),e.EFF(330,"@nestjs/common"),e.k0s(),e.EFF(331," package.\n"),e.k0s(),e.j41(332,"p"),e.EFF(333,"To ensure that "),e.j41(334,"code"),e.EFF(335,"SwaggerModule"),e.k0s(),e.EFF(336," will generate a definition for our model, we must add it as an extra model, like we did earlier with the "),e.j41(337,"code"),e.EFF(338,"PaginatedDto"),e.k0s(),e.EFF(339," in the controller."),e.k0s(),e.j41(340,"p"),e.EFF(341,"With this in place, we can use the custom "),e.j41(342,"code"),e.EFF(343,"@ApiPaginatedResponse()"),e.k0s(),e.EFF(344," decorator on our endpoint:"),e.k0s(),e.j41(345,"app-copy-button")(346,"pre")(347,"code",16),e.EFF(348,"\n@ApiPaginatedResponse(CatDto)\nasync findAll(): Promise<PaginatedDto<CatDto>> {}\n"),e.k0s()()(),e.j41(349,"p"),e.EFF(350,"For client generation tools, this approach poses an ambiguity in how the "),e.j41(351,"code"),e.EFF(352,"PaginatedResponse<TModel>"),e.k0s(),e.EFF(353," is being generated for the client. The following snippet is an example of a client generator result for the above "),e.j41(354,"code"),e.EFF(355,"GET /"),e.k0s(),e.EFF(356," endpoint."),e.k0s(),e.j41(357,"app-copy-button")(358,"pre")(359,"code",7),e.EFF(360,"\n// Angular\nfindAll(): Observable<{ total: number, limit: number, offset: number, results: CatDto[] }>\n"),e.k0s()()(),e.j41(361,"p"),e.EFF(362,"As you can see, the "),e.j41(363,"strong"),e.EFF(364,"Return Type"),e.k0s(),e.EFF(365," here is ambiguous. To workaround this issue, you can add a "),e.j41(366,"code"),e.EFF(367,"title"),e.k0s(),e.EFF(368," property to the "),e.j41(369,"code"),e.EFF(370,"schema"),e.k0s(),e.EFF(371," for "),e.j41(372,"code"),e.EFF(373,"ApiPaginatedResponse"),e.k0s(),e.EFF(374,":"),e.k0s(),e.j41(375,"app-copy-button")(376,"pre")(377,"code",7),e.EFF(378,"\nexport const ApiPaginatedResponse = <TModel extends Type<any>>(model: TModel) => {\n  return applyDecorators(\n    ApiOkResponse({\n      schema: {\n        title: `PaginatedResponseOf${model.name}`,\n        allOf: [\n          // ...\n        ],\n      },\n    }),\n  );\n};\n"),e.k0s()()(),e.j41(379,"p"),e.EFF(380,"Now the result of the client generator tool will become:"),e.k0s(),e.j41(381,"app-copy-button")(382,"pre")(383,"code",16),e.EFF(384,"\n// Angular\nfindAll(): Observable<PaginatedResponseOfCatDto>\n"),e.k0s()()()())},dependencies:[i.a,p.z,F.Wk],encapsulation:2,changeDetection:0})}return t})(),b=(()=>{class t extends r.y{static \u0275fac=(()=>{let o;return function(s){return(o||(o=e.xGo(t)))(s||t)}})();static \u0275cmp=e.VBU({type:t,selectors:[["app-openapi-other-features"]],features:[e.Vt3],decls:121,vars:0,consts:[["contentReference",""],[1,"content"],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/other-features.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","other-features"],["appAnchor","","id","global-prefix"],[1,"language-typescript"],["appAnchor","","id","global-parameters"],["appAnchor","","id","multiple-specifications"],[1,"language-bash"],["src","/assets/swagger-cats.png"],["src","/assets/swagger-dogs.png"],["appAnchor","","id","dropdown-in-the-explorer-bar"],[1,"info"],["href","/openapi/introduction#setup-options"]],template:function(n,s){1&n&&(e.j41(0,"div",1,0)(2,"div",2)(3,"a",3),e.nrm(4,"i",4),e.k0s()(),e.j41(5,"h3",5),e.EFF(6,"Other features"),e.k0s(),e.j41(7,"p"),e.EFF(8,"This page lists all the other available features that you may find useful."),e.k0s(),e.j41(9,"h4",6)(10,"span"),e.EFF(11,"Global prefix"),e.k0s()(),e.j41(12,"p"),e.EFF(13,"To ignore a global prefix for routes set through "),e.j41(14,"code"),e.EFF(15,"setGlobalPrefix()"),e.k0s(),e.EFF(16,", use "),e.j41(17,"code"),e.EFF(18,"ignoreGlobalPrefix"),e.k0s(),e.EFF(19,":"),e.k0s(),e.j41(20,"app-copy-button")(21,"pre")(22,"code",7),e.EFF(23,"\nconst document = SwaggerModule.createDocument(app, options, {\n  ignoreGlobalPrefix: true,\n});\n"),e.k0s()()(),e.j41(24,"h4",8)(25,"span"),e.EFF(26,"Global parameters"),e.k0s()(),e.j41(27,"p"),e.EFF(28,"You can add parameter definitions to all routes using "),e.j41(29,"code"),e.EFF(30,"DocumentBuilder"),e.k0s(),e.EFF(31,":"),e.k0s(),e.j41(32,"app-copy-button")(33,"pre")(34,"code",7),e.EFF(35,"\nconst options = new DocumentBuilder().addGlobalParameters({\n  name: 'tenantId',\n  in: 'header',\n});\n"),e.k0s()()(),e.j41(36,"h4",9)(37,"span"),e.EFF(38,"Multiple specifications"),e.k0s()(),e.j41(39,"p"),e.EFF(40,"The "),e.j41(41,"code"),e.EFF(42,"SwaggerModule"),e.k0s(),e.EFF(43," provides a way to support multiple specifications. In other words, you can serve different documentation, with different UIs, on different endpoints."),e.k0s(),e.j41(44,"p"),e.EFF(45,"To support multiple specifications, your application must be written with a modular approach. The "),e.j41(46,"code"),e.EFF(47,"createDocument()"),e.k0s(),e.EFF(48," method takes a 3rd argument, "),e.j41(49,"code"),e.EFF(50,"extraOptions"),e.k0s(),e.EFF(51,", which is an object with a property named "),e.j41(52,"code"),e.EFF(53,"include"),e.k0s(),e.EFF(54,". The "),e.j41(55,"code"),e.EFF(56,"include"),e.k0s(),e.EFF(57," property takes a value which is an array of modules."),e.k0s(),e.j41(58,"p"),e.EFF(59,"You can setup multiple specifications support as shown below:"),e.k0s(),e.j41(60,"app-copy-button")(61,"pre")(62,"code",7),e.EFF(63,"\nimport { NestFactory } from '@nestjs/core';\nimport { SwaggerModule, DocumentBuilder } from '@nestjs/swagger';\nimport { AppModule } from './app.module';\nimport { CatsModule } from './cats/cats.module';\nimport { DogsModule } from './dogs/dogs.module';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n\n  /**\n   * createDocument(application, configurationOptions, extraOptions);\n   *\n   * createDocument method takes an optional 3rd argument \"extraOptions\"\n   * which is an object with \"include\" property where you can pass an Array\n   * of Modules that you want to include in that Swagger Specification\n   * E.g: CatsModule and DogsModule will have two separate Swagger Specifications which\n   * will be exposed on two different SwaggerUI with two different endpoints.\n   */\n\n  const options = new DocumentBuilder()\n    .setTitle('Cats example')\n    .setDescription('The cats API description')\n    .setVersion('1.0')\n    .addTag('cats')\n    .build();\n\n  const catDocumentFactory = () =>\n    SwaggerModule.createDocument(app, options, {\n      include: [CatsModule],\n    });\n  SwaggerModule.setup('api/cats', app, catDocumentFactory);\n\n  const secondOptions = new DocumentBuilder()\n    .setTitle('Dogs example')\n    .setDescription('The dogs API description')\n    .setVersion('1.0')\n    .addTag('dogs')\n    .build();\n\n  const dogDocumentFactory = () =>\n    SwaggerModule.createDocument(app, secondOptions, {\n      include: [DogsModule],\n    });\n  SwaggerModule.setup('api/dogs', app, dogDocumentFactory);\n\n  await app.listen(process.env.PORT ?? 3000);\n}\nbootstrap();\n"),e.k0s()()(),e.j41(64,"p"),e.EFF(65,"Now you can start your server with the following command:"),e.k0s(),e.j41(66,"pre")(67,"code",10),e.EFF(68,"\n$ npm run start\n"),e.k0s()(),e.j41(69,"p"),e.EFF(70,"Navigate to "),e.j41(71,"code"),e.EFF(72,"http://localhost:3000/api/cats"),e.k0s(),e.EFF(73," to see the Swagger UI for cats:"),e.k0s(),e.j41(74,"figure"),e.nrm(75,"img",11),e.k0s(),e.j41(76,"p"),e.EFF(77,"In turn, "),e.j41(78,"code"),e.EFF(79,"http://localhost:3000/api/dogs"),e.k0s(),e.EFF(80," will expose the Swagger UI for dogs:"),e.k0s(),e.j41(81,"figure"),e.nrm(82,"img",12),e.k0s(),e.j41(83,"h4",13)(84,"span"),e.EFF(85,"Dropdown in the explorer bar"),e.k0s()(),e.j41(86,"p"),e.EFF(87,"To enable support for multiple specifications in the dropdown menu of the explorer bar, you'll need to set "),e.j41(88,"code"),e.EFF(89,"explorer: true"),e.k0s(),e.EFF(90," and configure "),e.j41(91,"code"),e.EFF(92,"swaggerOptions.urls"),e.k0s(),e.EFF(93," in your "),e.j41(94,"code"),e.EFF(95,"SwaggerCustomOptions"),e.k0s(),e.EFF(96,"."),e.k0s(),e.j41(97,"blockquote",14)(98,"strong"),e.EFF(99,"Hint"),e.k0s(),e.EFF(100," Ensure that "),e.j41(101,"code"),e.EFF(102,"swaggerOptions.urls"),e.k0s(),e.EFF(103," points to the JSON format of your Swagger documents! To specify the JSON document, use "),e.j41(104,"code"),e.EFF(105,"jsonDocumentUrl"),e.k0s(),e.EFF(106," within "),e.j41(107,"code"),e.EFF(108,"SwaggerCustomOptions"),e.k0s(),e.EFF(109,". For more setup options, check "),e.j41(110,"a",15),e.EFF(111,"here"),e.k0s(),e.EFF(112,".\n"),e.k0s(),e.j41(113,"p"),e.EFF(114,"Here\u2019s how to set up multiple specifications from a dropdown in the explorer bar:"),e.k0s(),e.j41(115,"app-copy-button")(116,"pre")(117,"code",7),e.EFF(118,"\nimport { NestFactory } from '@nestjs/core';\nimport { SwaggerModule, DocumentBuilder } from '@nestjs/swagger';\nimport { AppModule } from './app.module';\nimport { CatsModule } from './cats/cats.module';\nimport { DogsModule } from './dogs/dogs.module';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n\n  // Main API options\n  const options = new DocumentBuilder()\n    .setTitle('Multiple Specifications Example')\n    .setDescription('Description for multiple specifications')\n    .setVersion('1.0')\n    .build();\n\n  // Create main API document\n  const document = SwaggerModule.createDocument(app, options);\n\n  // Setup main API Swagger UI with dropdown support\n  SwaggerModule.setup('api', app, document, {\n    explorer: true,\n    swaggerOptions: {\n      urls: [\n        {\n          name: '1. API',\n          url: 'api/swagger.json',\n        },\n        {\n          name: '2. Cats API',\n          url: 'api/cats/swagger.json',\n        },\n        {\n          name: '3. Dogs API',\n          url: 'api/dogs/swagger.json',\n        },\n      ],\n    },\n    jsonDocumentUrl: '/api/swagger.json',\n  });\n\n  // Cats API options\n  const catOptions = new DocumentBuilder()\n    .setTitle('Cats Example')\n    .setDescription('Description for the Cats API')\n    .setVersion('1.0')\n    .addTag('cats')\n    .build();\n\n  // Create Cats API document\n  const catDocument = SwaggerModule.createDocument(app, catOptions, {\n    include: [CatsModule],\n  });\n\n  // Setup Cats API Swagger UI\n  SwaggerModule.setup('api/cats', app, catDocument, {\n    jsonDocumentUrl: '/api/cats/swagger.json',\n  });\n\n  // Dogs API options\n  const dogOptions = new DocumentBuilder()\n    .setTitle('Dogs Example')\n    .setDescription('Description for the Dogs API')\n    .setVersion('1.0')\n    .addTag('dogs')\n    .build();\n\n  // Create Dogs API document\n  const dogDocument = SwaggerModule.createDocument(app, dogOptions, {\n    include: [DogsModule],\n  });\n\n  // Setup Dogs API Swagger UI\n  SwaggerModule.setup('api/dogs', app, dogDocument, {\n    jsonDocumentUrl: '/api/dogs/swagger.json',\n  });\n\n  await app.listen(3000);\n}\n\nbootstrap();\n"),e.k0s()()(),e.j41(119,"p"),e.EFF(120,"In this example, we set up a main API along with separate specifications for Cats and Dogs, each accessible from the dropdown in the explorer bar."),e.k0s()())},dependencies:[i.a,p.z],encapsulation:2,changeDetection:0})}return t})(),w=(()=>{class t extends r.y{static \u0275fac=(()=>{let o;return function(s){return(o||(o=e.xGo(t)))(s||t)}})();static \u0275cmp=e.VBU({type:t,selectors:[["app-openapi-security"]],features:[e.Vt3],decls:117,vars:0,consts:[["contentReference",""],[1,"content"],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/security.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","security"],[1,"language-typescript"],["appAnchor","","id","basic-authentication"],["appAnchor","","id","bearer-authentication"],["appAnchor","","id","oauth2-authentication"],["appAnchor","","id","cookie-authentication"]],template:function(n,s){1&n&&(e.j41(0,"div",1,0)(2,"div",2)(3,"a",3),e.nrm(4,"i",4),e.k0s()(),e.j41(5,"h3",5),e.EFF(6,"Security"),e.k0s(),e.j41(7,"p"),e.EFF(8,"To define which security mechanisms should be used for a specific operation, use the "),e.j41(9,"code"),e.EFF(10,"@ApiSecurity()"),e.k0s(),e.EFF(11," decorator."),e.k0s(),e.j41(12,"app-copy-button")(13,"pre")(14,"code",6),e.EFF(15,"\n@ApiSecurity('basic')\n@Controller('cats')\nexport class CatsController {}\n"),e.k0s()()(),e.j41(16,"p"),e.EFF(17,"Before you run your application, remember to add the security definition to your base document using "),e.j41(18,"code"),e.EFF(19,"DocumentBuilder"),e.k0s(),e.EFF(20,":"),e.k0s(),e.j41(21,"app-copy-button")(22,"pre")(23,"code",6),e.EFF(24,"\nconst options = new DocumentBuilder().addSecurity('basic', {\n  type: 'http',\n  scheme: 'basic',\n});\n"),e.k0s()()(),e.j41(25,"p"),e.EFF(26,"Some of the most popular authentication techniques are built-in (e.g., "),e.j41(27,"code"),e.EFF(28,"basic"),e.k0s(),e.EFF(29," and "),e.j41(30,"code"),e.EFF(31,"bearer"),e.k0s(),e.EFF(32,") and therefore you don't have to define security mechanisms manually as shown above."),e.k0s(),e.j41(33,"h4",7)(34,"span"),e.EFF(35,"Basic authentication"),e.k0s()(),e.j41(36,"p"),e.EFF(37,"To enable basic authentication, use "),e.j41(38,"code"),e.EFF(39,"@ApiBasicAuth()"),e.k0s(),e.EFF(40,"."),e.k0s(),e.j41(41,"app-copy-button")(42,"pre")(43,"code",6),e.EFF(44,"\n@ApiBasicAuth()\n@Controller('cats')\nexport class CatsController {}\n"),e.k0s()()(),e.j41(45,"p"),e.EFF(46,"Before you run your application, remember to add the security definition to your base document using "),e.j41(47,"code"),e.EFF(48,"DocumentBuilder"),e.k0s(),e.EFF(49,":"),e.k0s(),e.j41(50,"app-copy-button")(51,"pre")(52,"code",6),e.EFF(53,"\nconst options = new DocumentBuilder().addBasicAuth();\n"),e.k0s()()(),e.j41(54,"h4",8)(55,"span"),e.EFF(56,"Bearer authentication"),e.k0s()(),e.j41(57,"p"),e.EFF(58,"To enable bearer authentication, use "),e.j41(59,"code"),e.EFF(60,"@ApiBearerAuth()"),e.k0s(),e.EFF(61,"."),e.k0s(),e.j41(62,"app-copy-button")(63,"pre")(64,"code",6),e.EFF(65,"\n@ApiBearerAuth()\n@Controller('cats')\nexport class CatsController {}\n"),e.k0s()()(),e.j41(66,"p"),e.EFF(67,"Before you run your application, remember to add the security definition to your base document using "),e.j41(68,"code"),e.EFF(69,"DocumentBuilder"),e.k0s(),e.EFF(70,":"),e.k0s(),e.j41(71,"app-copy-button")(72,"pre")(73,"code",6),e.EFF(74,"\nconst options = new DocumentBuilder().addBearerAuth();\n"),e.k0s()()(),e.j41(75,"h4",9)(76,"span"),e.EFF(77,"OAuth2 authentication"),e.k0s()(),e.j41(78,"p"),e.EFF(79,"To enable OAuth2, use "),e.j41(80,"code"),e.EFF(81,"@ApiOAuth2()"),e.k0s(),e.EFF(82,"."),e.k0s(),e.j41(83,"app-copy-button")(84,"pre")(85,"code",6),e.EFF(86,"\n@ApiOAuth2(['pets:write'])\n@Controller('cats')\nexport class CatsController {}\n"),e.k0s()()(),e.j41(87,"p"),e.EFF(88,"Before you run your application, remember to add the security definition to your base document using "),e.j41(89,"code"),e.EFF(90,"DocumentBuilder"),e.k0s(),e.EFF(91,":"),e.k0s(),e.j41(92,"app-copy-button")(93,"pre")(94,"code",6),e.EFF(95,"\nconst options = new DocumentBuilder().addOAuth2();\n"),e.k0s()()(),e.j41(96,"h4",10)(97,"span"),e.EFF(98,"Cookie authentication"),e.k0s()(),e.j41(99,"p"),e.EFF(100,"To enable cookie authentication, use "),e.j41(101,"code"),e.EFF(102,"@ApiCookieAuth()"),e.k0s(),e.EFF(103,"."),e.k0s(),e.j41(104,"app-copy-button")(105,"pre")(106,"code",6),e.EFF(107,"\n@ApiCookieAuth()\n@Controller('cats')\nexport class CatsController {}\n"),e.k0s()()(),e.j41(108,"p"),e.EFF(109,"Before you run your application, remember to add the security definition to your base document using "),e.j41(110,"code"),e.EFF(111,"DocumentBuilder"),e.k0s(),e.EFF(112,":"),e.k0s(),e.j41(113,"app-copy-button")(114,"pre")(115,"code",6),e.EFF(116,"\nconst options = new DocumentBuilder().addCookieAuth('optional-session-id');\n"),e.k0s()()()())},dependencies:[i.a,p.z],encapsulation:2,changeDetection:0})}return t})();var A=a(8149);const C=[{path:"introduction",component:g,data:{title:"OpenAPI (Swagger)"}},{path:"types-and-parameters",component:(()=>{class t extends r.y{static \u0275fac=(()=>{let o;return function(s){return(o||(o=e.xGo(t)))(s||t)}})();static \u0275cmp=e.VBU({type:t,selectors:[["app-openapi-types-parameters"]],features:[e.Vt3],decls:481,vars:1,consts:[["contentReference",""],[1,"content"],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/types-and-parameters.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","types-and-parameters"],[1,"language-typescript"],[1,"info"],["src","/assets/swagger-dto.png"],["routerLink","/openapi/cli-plugin"],["src","/assets/swagger-dto2.png"],["rel","nofollow","target","_blank","href","https://swagger.io/specification/#schemaObject"],["appAnchor","","id","arrays"],["appAnchor","","id","circular-dependencies"],["appAnchor","","id","generics-and-interfaces"],["appAnchor","","id","enums"],["src","/assets/enum_query.gif"],["src","/assets/enum_query_array.gif"],["appAnchor","","id","enums-schema"],["rel","nofollow","target","_blank","href","https://swagger.io/docs/specification/data-models/enums/"],[1,"language-yaml"],["rel","nofollow","target","_blank","href","https://github.com/RicoSuter/NSwag"],["appAnchor","","id","property-value-examples"],["appAnchor","","id","raw-definitions"],["appAnchor","","id","extra-models"],["appAnchor","","id","oneof-anyof-allof"],["rel","nofollow","target","_blank","href","https://swagger.io/docs/specification/data-models/oneof-anyof-allof-not/"],["appAnchor","","id","schema-name-and-description"]],template:function(n,s){1&n&&(e.j41(0,"div",1,0)(2,"div",2)(3,"a",3),e.nrm(4,"i",4),e.k0s()(),e.j41(5,"h3",5),e.EFF(6,"Types and parameters"),e.k0s(),e.j41(7,"p"),e.EFF(8,"The "),e.j41(9,"code"),e.EFF(10,"SwaggerModule"),e.k0s(),e.EFF(11," searches for all "),e.j41(12,"code"),e.EFF(13,"@Body()"),e.k0s(),e.EFF(14,", "),e.j41(15,"code"),e.EFF(16,"@Query()"),e.k0s(),e.EFF(17,", and "),e.j41(18,"code"),e.EFF(19,"@Param()"),e.k0s(),e.EFF(20," decorators in route handlers to generate the API document. It also creates corresponding model definitions by taking advantage of reflection. Consider the following code:"),e.k0s(),e.j41(21,"app-copy-button")(22,"pre")(23,"code",6),e.EFF(24,"\n@Post()\nasync create(@Body() createCatDto: CreateCatDto) {\n  this.catsService.create(createCatDto);\n}\n"),e.k0s()()(),e.j41(25,"blockquote",7)(26,"strong"),e.EFF(27,"Hint"),e.k0s(),e.EFF(28," To explicitly set the body definition use the "),e.j41(29,"code"),e.EFF(30,"@ApiBody()"),e.k0s(),e.EFF(31," decorator (imported from the "),e.j41(32,"code"),e.EFF(33,"@nestjs/swagger"),e.k0s(),e.EFF(34," package).\n"),e.k0s(),e.j41(35,"p"),e.EFF(36,"Based on the "),e.j41(37,"code"),e.EFF(38,"CreateCatDto"),e.k0s(),e.EFF(39,", the following model definition Swagger UI will be created:"),e.k0s(),e.j41(40,"figure"),e.nrm(41,"img",8),e.k0s(),e.j41(42,"p"),e.EFF(43,"As you can see, the definition is empty although the class has a few declared properties. In order to make the class properties visible to the "),e.j41(44,"code"),e.EFF(45,"SwaggerModule"),e.k0s(),e.EFF(46,", we have to either annotate them with the "),e.j41(47,"code"),e.EFF(48,"@ApiProperty()"),e.k0s(),e.EFF(49," decorator or use the CLI plugin (read more in the "),e.j41(50,"strong"),e.EFF(51,"Plugin"),e.k0s(),e.EFF(52," section) which will do it automatically:"),e.k0s(),e.j41(53,"app-copy-button")(54,"pre")(55,"code",6),e.EFF(56,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.k0s()()(),e.j41(57,"blockquote",7)(58,"strong"),e.EFF(59,"Hint"),e.k0s(),e.EFF(60," Instead of manually annotating each property, consider using the Swagger plugin (see "),e.j41(61,"a",9),e.EFF(62,"Plugin"),e.k0s(),e.EFF(63," section) which will automatically provide this for you.\n"),e.k0s(),e.j41(64,"p"),e.EFF(65,"Let's open the browser and verify the generated "),e.j41(66,"code"),e.EFF(67,"CreateCatDto"),e.k0s(),e.EFF(68," model:"),e.k0s(),e.j41(69,"figure"),e.nrm(70,"img",10),e.k0s(),e.j41(71,"p"),e.EFF(72,"In addition, the "),e.j41(73,"code"),e.EFF(74,"@ApiProperty()"),e.k0s(),e.EFF(75," decorator allows setting various "),e.j41(76,"a",11),e.EFF(77,"Schema Object"),e.k0s(),e.EFF(78," properties:"),e.k0s(),e.j41(79,"app-copy-button")(80,"pre")(81,"code",6),e.EFF(82,"\n@ApiProperty({\n  description: 'The age of a cat',\n  minimum: 1,\n  default: 1,\n})\nage: number;\n"),e.k0s()()(),e.j41(83,"blockquote",7)(84,"strong"),e.EFF(85,"Hint"),e.k0s(),e.EFF(86," Instead of explicitly typing the "),e.j41(87,"code"),e.EFF(88),e.k0s(),e.EFF(89," you can use the "),e.j41(90,"code"),e.EFF(91,"@ApiPropertyOptional()"),e.k0s(),e.EFF(92," short-hand decorator.\n"),e.k0s(),e.j41(93,"p"),e.EFF(94,"In order to explicitly set the type of the property, use the "),e.j41(95,"code"),e.EFF(96,"type"),e.k0s(),e.EFF(97," key:"),e.k0s(),e.j41(98,"app-copy-button")(99,"pre")(100,"code",6),e.EFF(101,"\n@ApiProperty({\n  type: Number,\n})\nage: number;\n"),e.k0s()()(),e.j41(102,"h4",12)(103,"span"),e.EFF(104,"Arrays"),e.k0s()(),e.j41(105,"p"),e.EFF(106,"When the property is an array, we must manually indicate the array type as shown below:"),e.k0s(),e.j41(107,"app-copy-button")(108,"pre")(109,"code",6),e.EFF(110,"\n@ApiProperty({ type: [String] })\nnames: string[];\n"),e.k0s()()(),e.j41(111,"blockquote",7)(112,"strong"),e.EFF(113,"Hint"),e.k0s(),e.EFF(114," Consider using the Swagger plugin (see "),e.j41(115,"a",9),e.EFF(116,"Plugin"),e.k0s(),e.EFF(117," section) which will automatically detect arrays.\n"),e.k0s(),e.j41(118,"p"),e.EFF(119,"Either include the type as the first element of an array (as shown above) or set the "),e.j41(120,"code"),e.EFF(121,"isArray"),e.k0s(),e.EFF(122," property to "),e.j41(123,"code"),e.EFF(124,"true"),e.k0s(),e.EFF(125,"."),e.k0s(),e.j41(126,"p"),e.nrm(127,"app-banner-enterprise"),e.k0s(),e.j41(128,"h4",13)(129,"span"),e.EFF(130,"Circular dependencies"),e.k0s()(),e.j41(131,"p"),e.EFF(132,"When you have circular dependencies between classes, use a lazy function to provide the "),e.j41(133,"code"),e.EFF(134,"SwaggerModule"),e.k0s(),e.EFF(135," with type information:"),e.k0s(),e.j41(136,"app-copy-button")(137,"pre")(138,"code",6),e.EFF(139,"\n@ApiProperty({ type: () => Node })\nnode: Node;\n"),e.k0s()()(),e.j41(140,"blockquote",7)(141,"strong"),e.EFF(142,"Hint"),e.k0s(),e.EFF(143," Consider using the Swagger plugin (see "),e.j41(144,"a",9),e.EFF(145,"Plugin"),e.k0s(),e.EFF(146," section) which will automatically detect circular dependencies.\n"),e.k0s(),e.j41(147,"h4",14)(148,"span"),e.EFF(149,"Generics and interfaces"),e.k0s()(),e.j41(150,"p"),e.EFF(151,"Since TypeScript does not store metadata about generics or interfaces, when you use them in your DTOs, "),e.j41(152,"code"),e.EFF(153,"SwaggerModule"),e.k0s(),e.EFF(154," may not be able to properly generate model definitions at runtime. For instance, the following code won't be correctly inspected by the Swagger module:"),e.k0s(),e.j41(155,"app-copy-button")(156,"pre")(157,"code",6),e.EFF(158,"\ncreateBulk(@Body() usersDto: CreateUserDto[])\n"),e.k0s()()(),e.j41(159,"p"),e.EFF(160,"In order to overcome this limitation, you can set the type explicitly:"),e.k0s(),e.j41(161,"app-copy-button")(162,"pre")(163,"code",6),e.EFF(164,"\n@ApiBody({ type: [CreateUserDto] })\ncreateBulk(@Body() usersDto: CreateUserDto[])\n"),e.k0s()()(),e.j41(165,"h4",15)(166,"span"),e.EFF(167,"Enums"),e.k0s()(),e.j41(168,"p"),e.EFF(169,"To identify an "),e.j41(170,"code"),e.EFF(171,"enum"),e.k0s(),e.EFF(172,", we must manually set the "),e.j41(173,"code"),e.EFF(174,"enum"),e.k0s(),e.EFF(175," property on the "),e.j41(176,"code"),e.EFF(177,"@ApiProperty"),e.k0s(),e.EFF(178," with an array of values."),e.k0s(),e.j41(179,"app-copy-button")(180,"pre")(181,"code",6),e.EFF(182,"\n@ApiProperty({ enum: ['Admin', 'Moderator', 'User']})\nrole: UserRole;\n"),e.k0s()()(),e.j41(183,"p"),e.EFF(184,"Alternatively, define an actual TypeScript enum as follows:"),e.k0s(),e.j41(185,"app-copy-button")(186,"pre")(187,"code",6),e.EFF(188,"\nexport enum UserRole {\n  Admin = 'Admin',\n  Moderator = 'Moderator',\n  User = 'User',\n}\n"),e.k0s()()(),e.j41(189,"p"),e.EFF(190,"You can then use the enum directly with the "),e.j41(191,"code"),e.EFF(192,"@Query()"),e.k0s(),e.EFF(193," parameter decorator in combination with the "),e.j41(194,"code"),e.EFF(195,"@ApiQuery()"),e.k0s(),e.EFF(196," decorator."),e.k0s(),e.j41(197,"app-copy-button")(198,"pre")(199,"code",6),e.EFF(200,"\n@ApiQuery({ name: 'role', enum: UserRole })\nasync filterByRole(@Query('role') role: UserRole = UserRole.User) {}\n"),e.k0s()()(),e.j41(201,"figure"),e.nrm(202,"img",16),e.k0s(),e.j41(203,"p"),e.EFF(204,"With "),e.j41(205,"code"),e.EFF(206,"isArray"),e.k0s(),e.EFF(207," set to "),e.j41(208,"strong"),e.EFF(209,"true"),e.k0s(),e.EFF(210,", the "),e.j41(211,"code"),e.EFF(212,"enum"),e.k0s(),e.EFF(213," can be selected as a "),e.j41(214,"strong"),e.EFF(215,"multi-select"),e.k0s(),e.EFF(216,":"),e.k0s(),e.j41(217,"figure"),e.nrm(218,"img",17),e.k0s(),e.j41(219,"h4",18)(220,"span"),e.EFF(221,"Enums schema"),e.k0s()(),e.j41(222,"p"),e.EFF(223,"By default, the "),e.j41(224,"code"),e.EFF(225,"enum"),e.k0s(),e.EFF(226," property will add a raw definition of "),e.j41(227,"a",19),e.EFF(228,"Enum"),e.k0s(),e.EFF(229," on the "),e.j41(230,"code"),e.EFF(231,"parameter"),e.k0s(),e.EFF(232,"."),e.k0s(),e.j41(233,"pre")(234,"code",20),e.EFF(235,"\n- breed:\n    type: 'string'\n    enum:\n      - Persian\n      - Tabby\n      - Siamese\n"),e.k0s()(),e.j41(236,"p"),e.EFF(237,"The above specification works fine for most cases. However, if you are utilizing a tool that takes the specification as "),e.j41(238,"strong"),e.EFF(239,"input"),e.k0s(),e.EFF(240," and generates "),e.j41(241,"strong"),e.EFF(242,"client-side"),e.k0s(),e.EFF(243," code, you might run into a problem with the generated code containing duplicated "),e.j41(244,"code"),e.EFF(245,"enums"),e.k0s(),e.EFF(246,". Consider the following code snippet:"),e.k0s(),e.j41(247,"app-copy-button")(248,"pre")(249,"code",6),e.EFF(250,"\n// generated client-side code\nexport class CatDetail {\n  breed: CatDetailEnum;\n}\n\nexport class CatInformation {\n  breed: CatInformationEnum;\n}\n\nexport enum CatDetailEnum {\n  Persian = 'Persian',\n  Tabby = 'Tabby',\n  Siamese = 'Siamese',\n}\n\nexport enum CatInformationEnum {\n  Persian = 'Persian',\n  Tabby = 'Tabby',\n  Siamese = 'Siamese',\n}\n"),e.k0s()()(),e.j41(251,"blockquote",7)(252,"strong"),e.EFF(253,"Hint"),e.k0s(),e.EFF(254," The above snippet is generated using a tool called "),e.j41(255,"a",21),e.EFF(256,"NSwag"),e.k0s(),e.EFF(257,".\n"),e.k0s(),e.j41(258,"p"),e.EFF(259,"You can see that now you have two "),e.j41(260,"code"),e.EFF(261,"enums"),e.k0s(),e.EFF(262," that are exactly the same.\nTo address this issue, you can pass an "),e.j41(263,"code"),e.EFF(264,"enumName"),e.k0s(),e.EFF(265," along with the "),e.j41(266,"code"),e.EFF(267,"enum"),e.k0s(),e.EFF(268," property in your decorator."),e.k0s(),e.j41(269,"app-copy-button")(270,"pre")(271,"code",6),e.EFF(272,"\nexport class CatDetail {\n  @ApiProperty({ enum: CatBreed, enumName: 'CatBreed' })\n  breed: CatBreed;\n}\n"),e.k0s()()(),e.j41(273,"p"),e.EFF(274,"The "),e.j41(275,"code"),e.EFF(276,"enumName"),e.k0s(),e.EFF(277," property enables "),e.j41(278,"code"),e.EFF(279,"@nestjs/swagger"),e.k0s(),e.EFF(280," to turn "),e.j41(281,"code"),e.EFF(282,"CatBreed"),e.k0s(),e.EFF(283," into its own "),e.j41(284,"code"),e.EFF(285,"schema"),e.k0s(),e.EFF(286," which in turns makes "),e.j41(287,"code"),e.EFF(288,"CatBreed"),e.k0s(),e.EFF(289," enum reusable. The specification will look like the following:"),e.k0s(),e.j41(290,"pre")(291,"code",20),e.EFF(292,"\nCatDetail:\n  type: 'object'\n  properties:\n    ...\n    - breed:\n        schema:\n          $ref: '#/components/schemas/CatBreed'\nCatBreed:\n  type: string\n  enum:\n    - Persian\n    - Tabby\n    - Siamese\n"),e.k0s()(),e.j41(293,"blockquote",7)(294,"strong"),e.EFF(295,"Hint"),e.k0s(),e.EFF(296," Any "),e.j41(297,"strong"),e.EFF(298,"decorator"),e.k0s(),e.EFF(299," that takes "),e.j41(300,"code"),e.EFF(301,"enum"),e.k0s(),e.EFF(302," as a property will also take "),e.j41(303,"code"),e.EFF(304,"enumName"),e.k0s(),e.EFF(305,".\n"),e.k0s(),e.j41(306,"h4",22)(307,"span"),e.EFF(308,"Property value examples"),e.k0s()(),e.j41(309,"p"),e.EFF(310,"You can set a single example for a property by using the "),e.j41(311,"code"),e.EFF(312,"example"),e.k0s(),e.EFF(313," key, like this:"),e.k0s(),e.j41(314,"app-copy-button")(315,"pre")(316,"code",6),e.EFF(317,"\n@ApiProperty({\n  example: 'persian',\n})\nbreed: string;\n"),e.k0s()()(),e.j41(318,"p"),e.EFF(319,"If you want to provide multiple examples, you can use the "),e.j41(320,"code"),e.EFF(321,"examples"),e.k0s(),e.EFF(322," key by passing in an object structured like this:"),e.k0s(),e.j41(323,"app-copy-button")(324,"pre")(325,"code",6),e.EFF(326,"\n@ApiProperty({\n  examples: {\n    Persian: { value: 'persian' },\n    Tabby: { value: 'tabby' },\n    Siamese: { value: 'siamese' },\n    'Scottish Fold': { value: 'scottish_fold' },\n  },\n})\nbreed: string;\n"),e.k0s()()(),e.j41(327,"h4",23)(328,"span"),e.EFF(329,"Raw definitions"),e.k0s()(),e.j41(330,"p"),e.EFF(331,"In certain cases, such as deeply nested arrays or matrices, you may need to manually define your type:"),e.k0s(),e.j41(332,"app-copy-button")(333,"pre")(334,"code",6),e.EFF(335,"\n@ApiProperty({\n  type: 'array',\n  items: {\n    type: 'array',\n    items: {\n      type: 'number',\n    },\n  },\n})\ncoords: number[][];\n"),e.k0s()()(),e.j41(336,"p"),e.EFF(337,"You can also specify raw object schemas, like this:"),e.k0s(),e.j41(338,"app-copy-button")(339,"pre")(340,"code",6),e.EFF(341,"\n@ApiProperty({\n  type: 'object',\n  properties: {\n    name: {\n      type: 'string',\n      example: 'Error'\n    },\n    status: {\n      type: 'number',\n      example: 400\n    }\n  },\n  required: ['name', 'status']\n})\nrawDefinition: Record<string, any>;\n"),e.k0s()()(),e.j41(342,"p"),e.EFF(343,"To manually define input/output content in controller classes, use the "),e.j41(344,"code"),e.EFF(345,"schema"),e.k0s(),e.EFF(346," property:"),e.k0s(),e.j41(347,"app-copy-button")(348,"pre")(349,"code",6),e.EFF(350,"\n@ApiBody({\n  schema: {\n    type: 'array',\n    items: {\n      type: 'array',\n      items: {\n        type: 'number',\n      },\n    },\n  },\n})\nasync create(@Body() coords: number[][]) {}\n"),e.k0s()()(),e.j41(351,"h4",24)(352,"span"),e.EFF(353,"Extra models"),e.k0s()(),e.j41(354,"p"),e.EFF(355,"To define additional models that are not directly referenced in your controllers but should be inspected by the Swagger module, use the "),e.j41(356,"code"),e.EFF(357,"@ApiExtraModels()"),e.k0s(),e.EFF(358," decorator:"),e.k0s(),e.j41(359,"app-copy-button")(360,"pre")(361,"code",6),e.EFF(362,"\n@ApiExtraModels(ExtraModel)\nexport class CreateCatDto {}\n"),e.k0s()()(),e.j41(363,"blockquote",7)(364,"strong"),e.EFF(365,"Hint"),e.k0s(),e.EFF(366," You only need to use "),e.j41(367,"code"),e.EFF(368,"@ApiExtraModels()"),e.k0s(),e.EFF(369," once for a specific model class.\n"),e.k0s(),e.j41(370,"p"),e.EFF(371,"Alternatively, you can pass an options object with the "),e.j41(372,"code"),e.EFF(373,"extraModels"),e.k0s(),e.EFF(374," property specified to the "),e.j41(375,"code"),e.EFF(376,"SwaggerModule#createDocument()"),e.k0s(),e.EFF(377," method, as follows:"),e.k0s(),e.j41(378,"app-copy-button")(379,"pre")(380,"code",6),e.EFF(381,"\nconst documentFactory = () =>\n  SwaggerModule.createDocument(app, options, {\n    extraModels: [ExtraModel],\n  });\n"),e.k0s()()(),e.j41(382,"p"),e.EFF(383,"To get a reference ("),e.j41(384,"code"),e.EFF(385,"$ref"),e.k0s(),e.EFF(386,") to your model, use the "),e.j41(387,"code"),e.EFF(388,"getSchemaPath(ExtraModel)"),e.k0s(),e.EFF(389," function:"),e.k0s(),e.j41(390,"app-copy-button")(391,"pre")(392,"code",6),e.EFF(393,"\n'application/vnd.api+json': {\n   schema: { $ref: getSchemaPath(ExtraModel) },\n},\n"),e.k0s()()(),e.j41(394,"h4",25)(395,"span"),e.EFF(396,"oneOf, anyOf, allOf"),e.k0s()(),e.j41(397,"p"),e.EFF(398,"To combine schemas, you can use the "),e.j41(399,"code"),e.EFF(400,"oneOf"),e.k0s(),e.EFF(401,", "),e.j41(402,"code"),e.EFF(403,"anyOf"),e.k0s(),e.EFF(404," or "),e.j41(405,"code"),e.EFF(406,"allOf"),e.k0s(),e.EFF(407," keywords ("),e.j41(408,"a",26),e.EFF(409,"read more"),e.k0s(),e.EFF(410,")."),e.k0s(),e.j41(411,"app-copy-button")(412,"pre")(413,"code",6),e.EFF(414,"\n@ApiProperty({\n  oneOf: [\n    { $ref: getSchemaPath(Cat) },\n    { $ref: getSchemaPath(Dog) },\n  ],\n})\npet: Cat | Dog;\n"),e.k0s()()(),e.j41(415,"p"),e.EFF(416,"If you want to define a polymorphic array (i.e., an array whose members span multiple schemas), you should use a raw definition (see above) to define your type by hand."),e.k0s(),e.j41(417,"app-copy-button")(418,"pre")(419,"code",6),e.EFF(420,"\ntype Pet = Cat | Dog;\n\n@ApiProperty({\n  type: 'array',\n  items: {\n    oneOf: [\n      { $ref: getSchemaPath(Cat) },\n      { $ref: getSchemaPath(Dog) },\n    ],\n  },\n})\npets: Pet[];\n"),e.k0s()()(),e.j41(421,"blockquote",7)(422,"strong"),e.EFF(423,"Hint"),e.k0s(),e.EFF(424," The "),e.j41(425,"code"),e.EFF(426,"getSchemaPath()"),e.k0s(),e.EFF(427," function is imported from "),e.j41(428,"code"),e.EFF(429,"@nestjs/swagger"),e.k0s(),e.EFF(430,".\n"),e.k0s(),e.j41(431,"p"),e.EFF(432,"Both "),e.j41(433,"code"),e.EFF(434,"Cat"),e.k0s(),e.EFF(435," and "),e.j41(436,"code"),e.EFF(437,"Dog"),e.k0s(),e.EFF(438," must be defined as extra models using the "),e.j41(439,"code"),e.EFF(440,"@ApiExtraModels()"),e.k0s(),e.EFF(441," decorator (at the class-level)."),e.k0s(),e.j41(442,"h4",27)(443,"span"),e.EFF(444,"Schema name and description"),e.k0s()(),e.j41(445,"p"),e.EFF(446,"As you may have noticed, the name of the generated schema is based on the name of the original model class (for example, the "),e.j41(447,"code"),e.EFF(448,"CreateCatDto"),e.k0s(),e.EFF(449," model generates a "),e.j41(450,"code"),e.EFF(451,"CreateCatDto"),e.k0s(),e.EFF(452," schema). If you'd like to change the schema name, you can use the "),e.j41(453,"code"),e.EFF(454,"@ApiSchema()"),e.k0s(),e.EFF(455," decorator."),e.k0s(),e.j41(456,"p"),e.EFF(457,"Here\u2019s an example:"),e.k0s(),e.j41(458,"app-copy-button")(459,"pre")(460,"code",6),e.EFF(461,"\n@ApiSchema({ name: 'CreateCatRequest' })\nclass CreateCatDto {}\n"),e.k0s()()(),e.j41(462,"p"),e.EFF(463,"The model above will be translated into the "),e.j41(464,"code"),e.EFF(465,"CreateCatRequest"),e.k0s(),e.EFF(466," schema."),e.k0s(),e.j41(467,"p"),e.EFF(468,"By default, no description is added to the generated schema. You can add one using the "),e.j41(469,"code"),e.EFF(470,"description"),e.k0s(),e.EFF(471," attribute:"),e.k0s(),e.j41(472,"app-copy-button")(473,"pre")(474,"code",6),e.EFF(475,"\n@ApiSchema({ description: 'Description of the CreateCatDto schema' })\nclass CreateCatDto {}\n"),e.k0s()()(),e.j41(476,"p"),e.EFF(477,"That way, the description will be included in the schema, as follows:"),e.k0s(),e.j41(478,"pre")(479,"code",20),e.EFF(480,"\nschemas:\n  CreateCatDto:\n    type: object\n    description: Description of the CreateCatDto schema\n"),e.k0s()()()),2&n&&(e.R7$(88),e.JRh("@ApiProperty({ required: false })"))},dependencies:[i.a,A.d,p.z,F.Wk],encapsulation:2,changeDetection:0})}return t})(),data:{title:"Types and Parameters - OpenAPI"}},{path:"operations",component:f,data:{title:"Operations - OpenAPI"}},{path:"security",component:w,data:{title:"Security - OpenAPI"}},{path:"decorators",component:E,data:{title:"Decorators - OpenAPI"}},{path:"mapped-types",component:k,data:{title:"Mapped Types - OpenAPI"}},{path:"cli-plugin",component:u,data:{title:"CLI Plugin - OpenAPI"}},{path:"other-features",component:b,data:{title:"Other features - OpenAPI"}},{path:"migration-guide",component:y,data:{title:"Migration guide - OpenAPI"}}];let P=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=e.$C({type:t});static \u0275inj=e.G2t({imports:[d.MD,l.G,F.iI.forChild(C)]})}return t})()}}]);